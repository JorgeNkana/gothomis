<md-dialog  class="fullscreen-dialog">
    <md-toolbar>
        <div class="md-toolbar-tools">
            <p style="text-align: right;" ng-if="selectedPatient.first_name.length >0"><span><i class="fa fa-user" aria-hidden="true"></i></span>&nbsp;&nbsp;&nbsp;{{selectedPatient.first_name}}
                {{selectedPatient.middle_name}} {{selectedPatient.last_name}}&nbsp;&nbsp;&nbsp;
                {{"MRN: "+selectedPatient.medical_record_number}}&nbsp;&nbsp;&nbsp;
                {{"DoB: "+selectedPatient.dob}}&nbsp;&nbsp;&nbsp;
                {{"Gender: "+selectedPatient.gender}}&nbsp;&nbsp;&nbsp;
                {{"Age: "+selectedPatient.age}}&nbsp;&nbsp;&nbsp; {{"Category: "+selectedPatient.sub_category_name}}</p>
            <span flex></span>
            <md-button class="md-icon-button" ng-click="cancel()">
                <md-icon md-svg-src="/svg/ic_close_24px.svg" aria-label="Close dialog"></md-icon>
            </md-button>
        </div>
    </md-toolbar>
    <md-dialog-content>
        <md-tabs md-dynamic-height md-border-bottom>
            <md-tab label="Previous visits">
                <md-content class="md-padding" style="padding:2em;">
                    <div layout="row">
                        <div flex="20">
                            <md-list style="color:white;font-weight:700">
                                <md-list-item style="padding:0;background-color:teal;margin:2px;cursor: pointer;" ng-click="getPatientReport(vt)" class="md-1-line" ng-repeat="vt in patientsVisits">
                                    {{vt.created_at}}
                                </md-list-item>
                            </md-list>
                        </div>
                        <div flex="80">
                            <md-card>
                                <md-card-content>
                                    <p>{{selectedPatient.first_name}}
                                        {{selectedPatient.middle_name}}
                                        {{selectedPatient.last_name}}&nbsp;&nbsp;&nbsp;
                                        {{"MRN: "+selectedPatient.medical_record_number}}                                                               {{"DoB: "+selectedPatient.dob}}&nbsp;&nbsp;&nbsp;
                                        {{"Gender: "+selectedPatient.gender}}&nbsp;&nbsp;&nbsp;
                                        {{"Age: "+selectedPatient.age}}</p>
                                    <v-accordion class="vAccordion--default">
                                        <v-pane>
                                            <v-pane-header>
                                                OPD History
                                            </v-pane-header>

                                            <v-pane-content>

                                                <table class="mdl-data-table mdl-js-data-table mdl-data-table--selectable mdl-shadow--2dp" width="100%">
                                                    <thead>
                                                    <th class="mdl-data-table__cell--non-numeric"></th>
                                                    <th class="mdl-data-table__cell--non-numeric full-width"></th>
                                                    <th class="mdl-data-table__cell--non-numeric full-width"></th>
                                                    </thead>
                                                    <tbody>
                                                    <tr ng-if="vitals.length>0">
                                                        <td colspan="2" style="text-align: left;background-color: rgba(110, 104, 113, 0.41)">
                                                            <strong>Vital signs</strong></td>
                                                    </tr>
                                                    <tr ng-repeat="vt in vitals" ng-if="vitals.length>0">
                                                        <td class="mdl-data-table__cell--non-numeric">{{vt.vital_name}}</td>
                                                        <td class="mdl-data-table__cell--non-numeric">
                                                            {{vt.vital_sign_value}} &nbsp; {{vt.si_unit}}
                                                        </td>
                                                        <td>Staff names: {{vt.name}} | {{vt.prof_name}}</td>
                                                    </tr>
                                                    <tr ng-if="prevHistory.length>0">
                                                        <td colspan="3" style="text-align: left;background-color: rgba(110, 104, 113, 0.41)">
                                                            <strong>Complaints</strong></td>

                                                    </tr>
                                                    <tr ng-if="!ph.admission_id" ng-repeat="ph in prevHistory">
                                                        <td class="mdl-data-table__cell--non-numeric">{{ph.status}}</td>
                                                        <td class="mdl-data-table__cell--non-numeric">
                                                            {{ph.description+' since '+ph.duration+' '+ph.duration_unit}}
                                                            <br>
                                                        </td>
                                                        <td>Staff names: {{ph.name}} | {{ph.prof_name}}</td>
                                                    </tr>
                                                    <tr ng-if="!ot.admission_id" ng-repeat="ot in otherComplaints">
                                                        <td class="mdl-data-table__cell--non-numeric"><span>Other Complaints</span></td>
                                                        <td class="mdl-data-table__cell--non-numeric">
                                                            {{ot.other_complaints}}
                                                        </td>
                                                        <td>Staff names: {{ot.name}} | {{ot.prof_name}}</td>
                                                    </tr>

                                                    <tr ng-if="!h.admission_id" ng-repeat="h in hpi">
                                                        <td class="mdl-data-table__cell--non-numeric"><span>History of Presenting Illness</span></td>
                                                        <td class="mdl-data-table__cell--non-numeric">
                                                            {{h.hpi}}
                                                        </td>
                                                        <td>Staff names: {{h.name}} | {{h.prof_name}}</td>
                                                    </tr>
                                                    <tr ng-if="prevRos.length>0">
                                                        <td colspan="3" style="text-align: left;background-color: rgba(110, 104, 113, 0.41)">
                                                            <strong>Review of systems</strong></td>
                                                    </tr>
                                                    <tr ng-repeat="ros in prevRos" ng-if="!ros.admission_id">
                                                        <td class="mdl-data-table__cell--non-numeric">{{ros.status}}</td>
                                                        <td class="mdl-data-table__cell--non-numeric">
                                                            {{ros.name}}
                                                        </td>
                                                        <td>Staff names: {{ros.user_name}} | {{ros.prof_name}}</td>
                                                    </tr>
                                                    <tr ng-if="!summary.admission_id" ng-repeat="summary in prevRosSummary">
                                                        <td class="mdl-data-table__cell--non-numeric"><span>RoS summary</span></td>
                                                        <td class="mdl-data-table__cell--non-numeric">
                                                            {{summary.review_summary}}
                                                        </td>
                                                        <td>Staff names: {{summary.name}} | {{summary.prof_name}}</td>
                                                    </tr>

                                                    <tr ng-if="allergies[0].length>0">
                                                        <td colspan="3" style="text-align: left;background-color: rgba(110, 104, 113, 0.41)">
                                                            <strong>Allergies</strong></td>
                                                    </tr>
                                                    <tr ng-repeat="allergy in allergies[0]" ng-if="!allergies[0].admission_id">
                                                        <td class="mdl-data-table__cell--non-numeric">{{allergy.status}}</td>
                                                        <td class="mdl-data-table__cell--non-numeric">
                                                            {{allergy.descriptions}}</td>
                                                        <td>Staff names: {{allergy.name}} | {{allergy.prof_name}}</td>
                                                    </tr>
                                                    <tr ng-if="allergies[1].length>0">
                                                        <td colspan="3" style="text-align: left;background-color: rgba(110, 104, 113, 0.41)">
                                                            <strong>Past medical history</strong></td>
                                                    </tr>
                                                    <tr ng-if="!allergy.admission_id" ng-repeat="allergy in allergies[1]">
                                                        <td class="mdl-data-table__cell--non-numeric">{{allergy.surgeries}}</td>
                                                        <td class="mdl-data-table__cell--non-numeric">{{allergy.admissions}}</td>
                                                        <td>Staff names: {{allergy.name}} | {{allergy.prof_name}}</td>
                                                    </tr>
                                                    <tr ng-if="!allergy.admission_id" ng-repeat="allergy in allergies[1]">
                                                        <td class="mdl-data-table__cell--non-numeric">{{allergy.transfusion}}</td>
                                                        <td class="mdl-data-table__cell--non-numeric">{{allergy.immunisation}}</td>
                                                        <td>Staff names: {{allergy.name}} | {{allergy.prof_name}}</td>
                                                    </tr>
                                                    <tr ng-if="prevFamily.length>0">
                                                        <td colspan="3" style="text-align: left;background-color: rgba(110, 104, 113, 0.41)">
                                                            <strong>Family and Social History</strong></td>
                                                    </tr>
                                                    <tr ng-if="prevFamily.length>0">
                                                        <td class="mdl-data-table__cell--non-numeric">Family and social
                                                            history</td>
                                                        <td class="mdl-data-table__cell--non-numeric">
                                                            {{prevFamily[0].chronic_illness}}.{{prevFamily[0].substance_abuse}}. <br>                                                                    {{prevFamily[0].adoption}}.{{prevFamily[0].others}}
                                                        </td>
                                                        <td>Staff names: {{prevFamily[0].name}} | {{prevFamily[0].prof_name}}</td>
                                                    </tr>
                                                    <tr ng-if="prevGen.length>0">
                                                        <td colspan="3" style="text-align: left;background-color: rgba(110, 104, 113, 0.41)">
                                                            <strong>General examination</strong></td>
                                                    </tr>
                                                    <tr ng-if="!gn.admission_id" ng-repeat="gn in prevGen">
                                                        <td class="mdl-data-table__cell--non-numeric">General examination</td>
                                                        <td class="mdl-data-table__cell--non-numeric">
                                                            {{gn.gen_examination}}
                                                        </td>
                                                        <td>Staff names: {{gn.name}} | {{gn.prof_name}}</td>
                                                    </tr>
                                                    <tr ng-if="prevLocal.length>0">
                                                        <td colspan="3" style="text-align: left;background-color: rgba(110, 104, 113, 0.41)">
                                                            <strong>Local examination</strong></td>
                                                    </tr>
                                                    <tr ng-if="!lc.admission_id" ng-repeat="lc in prevLocal">
                                                        <td class="mdl-data-table__cell--non-numeric">Local examination</td>
                                                        <td class="mdl-data-table__cell--non-numeric">
                                                            {{lc.local_examination}}
                                                        </td>
                                                        <td>Staff names: {{lc.name}} | {{lc.prof_name}}</td>
                                                    </tr>
                                                    <tr ng-if="prevSystemic.length>0">
                                                        <td colspan="3" style="text-align: left;background-color: rgba(110, 104, 113, 0.41)">
                                                            <strong>Systemic examination</strong></td>
                                                    </tr>
                                                    <tr ng-if="!sys.admission_id" ng-repeat="sys in prevSystemic">
                                                        <td class="mdl-data-table__cell--non-numeric">{{sys.system}}</td>
                                                        <td class="mdl-data-table__cell--non-numeric">
                                                            {{sys.category +' - '+ sys.observation}}
                                                        </td>
                                                        <td>Staff names: {{sys.name}} | {{sys.prof_name}}</td>
                                                    </tr>
                                                    <tr ng-if="prevOtherSystemic.length>0">
                                                        <td colspan="3" style="text-align: left;background-color: rgba(110, 104, 113, 0.41)">
                                                            <strong>Other systemic examination</strong></td>
                                                    </tr>
                                                    <tr ng-if="!sys.admission_id" ng-repeat="sys in prevOtherSystemic">
                                                        <td class="mdl-data-table__cell--non-numeric">{{sys.system}}</td>
                                                        <td class="mdl-data-table__cell--non-numeric">
                                                            {{sys.other_systems_summary}}
                                                        </td>
                                                        <td>Staff names: {{sys.name}} | {{sys.prof_name}}</td>
                                                    </tr>
                                                    <tr ng-if="prevSummary[0].length>0">
                                                        <td colspan="3" style="text-align: left;background-color: rgba(110, 104, 113, 0.41)">
                                                            <strong>Systemic examination summary</strong></td>
                                                    </tr>
                                                    <tr ng-if="!prevSummary[0].admission_id">
                                                        <td class="mdl-data-table__cell--non-numeric">Systemic examination summary</td>
                                                        <td class="mdl-data-table__cell--non-numeric">
                                                            {{prevSummary[0].summary_examination}}
                                                        </td>
                                                        <td>Staff names: {{prevSummary[0].name}} | {{prevSummary[0].prof_name}}</td>
                                                    </tr>
                                                    <tr ng-if="prevDiagnosis.length>0">
                                                        <td colspan="3" style="text-align: left;background-color: rgba(110, 104, 113, 0.41)">
                                                            <strong>Diagnosis</strong></td>
                                                    </tr>
                                                    <tr ng-repeat=" diag in prevDiagnosis" ng-if="!diag.admission_id">
                                                        <td class="mdl-data-table__cell--non-numeric"> {{diag.status}}
                                                        </td>
                                                        <td class="mdl-data-table__cell--non-numeric">
                                                            {{diag.description}}
                                                        </td>
                                                        <td>Staff names: {{diag.name}} | {{diag.prof_name}}</td>
                                                    </tr>
                                                    <tr ng-if="labInvestigationsz.length>0">
                                                        <td colspan="3" style="text-align: left;background-color: rgba(110, 104, 113, 0.41)">
                                                            <strong>Investigations</strong></td>
                                                    </tr>
                                                    <tr ng-repeat=" lb in labInvestigationsz" ng-if="!lb.admission_id">
                                                        <td class="mdl-data-table__cell--non-numeric">
                                                            {{lb.item_name}} </td>
                                                        <td class="mdl-data-table__cell--non-numeric">
                                                            {{lb.description+' '+lb.unit}}
                                                        </td>
                                                        <td>Staff names: {{lb.name}} | {{lb.prof_name}}</td>
                                                    </tr>
                                                    <tr ng-repeat=" rd in radiologyResults" ng-if="!rd.admission_id">
                                                        <td class="mdl-data-table__cell--non-numeric">
                                                            {{rd.item_name}} </td>
                                                        <td class="mdl-data-table__cell--non-numeric">
                                                            {{rd.description}}
                                                        </td>
                                                        <td>Staff names: {{rd.name}} | {{rd.prof_name}}</td>
                                                    </tr>
                                                    <tr ng-if="prevMedicines[0].length>0">
                                                        <td colspan="3" style="text-align: left;background-color: rgba(110, 104, 113, 0.41)">
                                                            <strong>Medications</strong></td>
                                                    </tr>
                                                    <tr ng-repeat="med in prevMedicines[0]" ng-if="!med.admission_id">
                                                        <td class="mdl-data-table__cell--non-numeric">
                                                            {{med.item_name}}</td>
                                                        <td class="mdl-data-table__cell--non-numeric">{{med.dose}},
                                                            {{med.frequency}},{{'for '+ med.duration}}</td>
                                                        <td>Staff names: {{med.name}} | {{med.prof_name}}</td>

                                                    </tr>
                                                    <tr ng-if="prevMedicines[1].length>0">
                                                        <td colspan="3" style="text-align: left;background-color: rgba(110, 104, 113, 0.41)">
                                                            <strong>Conservative management</strong></td>
                                                    </tr>
                                                    <tr ng-repeat="med in prevMedicines[1]" ng-if="!med.admission_id">
                                                        <td class="mdl-data-table__cell--non-numeric">
                                                        </td>
                                                        <td class="mdl-data-table__cell--non-numeric">{{med.conservatives}}</td>
                                                        <td>Staff names: {{med.name}} | {{med.prof_name}}</td>

                                                    </tr>
                                                    <tr ng-if="pastProcedures.length>0">
                                                        <td colspan="3" style="text-align: left;background-color: rgba(110, 104, 113, 0.41)">
                                                            <strong>Procedures</strong></td>
                                                    </tr>
                                                    <tr ng-repeat="pro in pastProcedures" ng-if="!pro.admission_id">
                                                        <td class="mdl-data-table__cell--non-numeric">{{pro.item_category}}</td>
                                                        <td class="mdl-data-table__cell--non-numeric">
                                                            {{pro.item_name}}</td>
                                                        <td>Staff names: {{pro.name}} | {{pro.prof_name}}</td>
                                                    </tr>
                                                    </tbody>
                                                </table>
                                            </v-pane-content>
                                        </v-pane>
                                        <v-pane>
                                            <v-pane-header>
                                                IPD History
                                            </v-pane-header>
                                            <v-pane-content>

                                                <table class="mdl-data-table mdl-js-data-table mdl-data-table--selectable mdl-shadow--2dp" width="100%">
                                                    <thead>
                                                    <th class="mdl-data-table__cell--non-numeric"></th>
                                                    <th class="mdl-data-table__cell--non-numeric full-width"></th>
                                                    <th class="mdl-data-table__cell--non-numeric full-width"></th>
                                                    </thead>
                                                    <tbody>
                                                    <tr ng-if="vitals.length>0">
                                                        <td colspan="2" style="text-align: left;background-color: rgba(110, 104, 113, 0.41)">
                                                            <strong>Vital signs</strong></td>
                                                    </tr>
                                                    <tr ng-repeat="vt in vitals" ng-if="vitals.length>0">
                                                        <td class="mdl-data-table__cell--non-numeric">{{vt.vital_name}}</td>
                                                        <td class="mdl-data-table__cell--non-numeric">
                                                            {{vt.vital_sign_value}} &nbsp; {{vt.si_unit}}
                                                        </td>
                                                        <td>Staff names: {{vt.name}} | {{vt.prof_name}}</td>
                                                    </tr>
                                                    <tr ng-if="prevHistory.length>0">
                                                        <td colspan="3" style="text-align: left;background-color: rgba(110, 104, 113, 0.41)">
                                                            <strong>Complaints</strong></td>

                                                    </tr>
                                                    <tr ng-if="ph.admission_id" ng-repeat="ph in prevHistory">
                                                        <td class="mdl-data-table__cell--non-numeric">{{ph.status}}</td>
                                                        <td class="mdl-data-table__cell--non-numeric">
                                                            {{ph.description+' since '+ph.duration+' '+ph.duration_unit}}
                                                            <br>
                                                        </td>
                                                        <td>Staff names: {{ph.name}} | {{ph.prof_name}}</td>
                                                    </tr>
                                                    <tr ng-if="ot.admission_id" ng-repeat="ot in otherComplaints">
                                                        <td class="mdl-data-table__cell--non-numeric"><span>Other Complaints</span></td>
                                                        <td class="mdl-data-table__cell--non-numeric">
                                                            {{ot.other_complaints}}
                                                        </td>
                                                        <td>Staff names: {{ot.name}} | {{ot.prof_name}}</td>
                                                    </tr>

                                                    <tr ng-if="h.admission_id" ng-repeat="h in hpi">
                                                        <td class="mdl-data-table__cell--non-numeric"><span>History of Presenting Illness</span></td>
                                                        <td class="mdl-data-table__cell--non-numeric">
                                                            {{h.hpi}}
                                                        </td>
                                                        <td>Staff names: {{h.name}} | {{h.prof_name}}</td>
                                                    </tr>
                                                    <tr ng-if="prevRos.length>0">
                                                        <td colspan="3" style="text-align: left;background-color: rgba(110, 104, 113, 0.41)">
                                                            <strong>Review of systems</strong></td>
                                                    </tr>
                                                    <tr ng-repeat="ros in prevRos" ng-if="ros.admission_id">
                                                        <td class="mdl-data-table__cell--non-numeric">{{ros.status}}</td>
                                                        <td class="mdl-data-table__cell--non-numeric">
                                                            {{ros.name}}
                                                        </td>
                                                        <td>Staff names: {{ros.user_name}} | {{ros.prof_name}}</td>
                                                    </tr>
                                                    <tr ng-if="summary.admission_id" ng-repeat="summary in prevRosSummary">
                                                        <td class="mdl-data-table__cell--non-numeric"><span>RoS summary</span></td>
                                                        <td class="mdl-data-table__cell--non-numeric">
                                                            {{summary.review_summary}}
                                                        </td>
                                                        <td>Staff names: {{summary.name}} | {{summary.prof_name}}</td>
                                                    </tr>

                                                    <tr ng-if="allergies[0].length>0">
                                                        <td colspan="3" style="text-align: left;background-color: rgba(110, 104, 113, 0.41)">
                                                            <strong>Allergies</strong></td>
                                                    </tr>
                                                    <tr ng-repeat="allergy in allergies[0]" ng-if="allergy.admission_id">
                                                        <td class="mdl-data-table__cell--non-numeric">{{allergy.status}}</td>
                                                        <td class="mdl-data-table__cell--non-numeric">
                                                            {{allergy.descriptions}}</td>
                                                        <td>Staff names: {{allergy.name}} | {{allergy.prof_name}}</td>
                                                    </tr>
                                                    <tr ng-if="allergies[1].length>0">
                                                        <td colspan="3" style="text-align: left;background-color: rgba(110, 104, 113, 0.41)">
                                                            <strong>Past medical history</strong></td>
                                                    </tr>
                                                    <tr ng-if="allergy.admission_id" ng-repeat="allergy in allergies[1]">
                                                        <td class="mdl-data-table__cell--non-numeric">{{allergy.surgeries}}</td>
                                                        <td class="mdl-data-table__cell--non-numeric">{{allergy.admissions}}</td>
                                                        <td>Staff names: {{allergy.name}} | {{allergy.prof_name}}</td>
                                                    </tr>
                                                    <tr ng-if="allergy.admission_id" ng-repeat="allergy in allergies[1]">
                                                        <td class="mdl-data-table__cell--non-numeric">{{allergy.transfusion}}</td>
                                                        <td class="mdl-data-table__cell--non-numeric">{{allergy.immunisation}}</td>
                                                        <td>Staff names: {{allergy.name}} | {{allergy.prof_name}}</td>
                                                    </tr>
                                                    <tr ng-if="prevFamily.length>0">
                                                        <td colspan="3" style="text-align: left;background-color: rgba(110, 104, 113, 0.41)">
                                                            <strong>Family and Social History</strong></td>
                                                    </tr>
                                                    <tr ng-if="prevFamily.admission_id">
                                                        <td class="mdl-data-table__cell--non-numeric">Family and social
                                                            history</td>
                                                        <td class="mdl-data-table__cell--non-numeric">
                                                            {{prevFamily[0].chronic_illness}}.{{prevFamily[0].substance_abuse}}. <br>                                                                    {{prevFamily[0].adoption}}.{{prevFamily[0].others}}
                                                        </td>
                                                        <td>Staff names: {{prevFamily[0].name}} | {{prevFamily[0].prof_name}}</td>
                                                    </tr>
                                                    <tr ng-if="prevGen.length>0">
                                                        <td colspan="3" style="text-align: left;background-color: rgba(110, 104, 113, 0.41)">
                                                            <strong>General examination</strong></td>
                                                    </tr>
                                                    <tr ng-if="gn.admission_id" ng-repeat="gn in prevGen">
                                                        <td class="mdl-data-table__cell--non-numeric">General examination</td>
                                                        <td class="mdl-data-table__cell--non-numeric">
                                                            {{gn.gen_examination}}
                                                        </td>
                                                        <td>Staff names: {{gn.name}} | {{gn.prof_name}}</td>
                                                    </tr>
                                                    <tr ng-if="prevLocal.length>0">
                                                        <td colspan="3" style="text-align: left;background-color: rgba(110, 104, 113, 0.41)">
                                                            <strong>Local examination</strong></td>
                                                    </tr>
                                                    <tr ng-if="lc.admission_id" ng-repeat="lc in prevLocal">
                                                        <td class="mdl-data-table__cell--non-numeric">Local examination</td>
                                                        <td class="mdl-data-table__cell--non-numeric">
                                                            {{lc.local_examination}}
                                                        </td>
                                                        <td>Staff names: {{lc.name}} | {{lc.prof_name}}</td>
                                                    </tr>
                                                    <tr ng-if="prevSystemic.length>0">
                                                        <td colspan="3" style="text-align: left;background-color: rgba(110, 104, 113, 0.41)">
                                                            <strong>Systemic examination</strong></td>
                                                    </tr>
                                                    <tr ng-if="sys.admission_id" ng-repeat="sys in prevSystemic">
                                                        <td class="mdl-data-table__cell--non-numeric">{{sys.system}}</td>
                                                        <td class="mdl-data-table__cell--non-numeric">
                                                            {{sys.category +' - '+ sys.observation}}
                                                        </td>
                                                        <td>Staff names: {{sys.name}} | {{sys.prof_name}}</td>
                                                    </tr>
                                                    <tr ng-if="prevOtherSystemic.length>0">
                                                        <td colspan="3" style="text-align: left;background-color: rgba(110, 104, 113, 0.41)">
                                                            <strong>Other systemic examination</strong></td>
                                                    </tr>
                                                    <tr ng-if="sys.admission_id" ng-repeat="sys in prevOtherSystemic">
                                                        <td class="mdl-data-table__cell--non-numeric">{{sys.system}}</td>
                                                        <td class="mdl-data-table__cell--non-numeric">
                                                            {{sys.other_systems_summary}}
                                                        </td>
                                                        <td>Staff names: {{sys.name}} | {{sys.prof_name}}</td>
                                                    </tr>
                                                    <tr ng-if="prevSummary[0].length>0">
                                                        <td colspan="3" style="text-align: left;background-color: rgba(110, 104, 113, 0.41)">
                                                            <strong>Systemic examination summary</strong></td>
                                                    </tr>
                                                    <tr ng-if="prevSummary[0].admission_id">
                                                        <td class="mdl-data-table__cell--non-numeric">Systemic examination summary</td>
                                                        <td class="mdl-data-table__cell--non-numeric">
                                                            {{prevSummary[0].summary_examination}}
                                                        </td>
                                                        <td>Staff names: {{prevSummary[0].name}} | {{prevSummary[0].prof_name}}</td>
                                                    </tr>
                                                    <tr ng-if="prevDiagnosis.length>0">
                                                        <td colspan="3" style="text-align: left;background-color: rgba(110, 104, 113, 0.41)">
                                                            <strong>Diagnosis</strong></td>
                                                    </tr>
                                                    <tr ng-repeat=" diag in prevDiagnosis" ng-if="diag.admission_id">
                                                        <td class="mdl-data-table__cell--non-numeric"> {{diag.status}}
                                                        </td>
                                                        <td class="mdl-data-table__cell--non-numeric">
                                                            {{diag.description}}
                                                        </td>
                                                        <td>Staff names: {{diag.name}} | {{diag.prof_name}}</td>
                                                    </tr>
                                                    <tr ng-if="labInvestigationsz.length>0">
                                                        <td colspan="3" style="text-align: left;background-color: rgba(110, 104, 113, 0.41)">
                                                            <strong>Investigations</strong></td>
                                                    </tr>
                                                    <tr ng-repeat=" lb in labInvestigationsz" ng-if="lb.admission_id">
                                                        <td class="mdl-data-table__cell--non-numeric">
                                                            {{lb.item_name}} </td>
                                                        <td class="mdl-data-table__cell--non-numeric">
                                                            {{lb.description+' '+lb.unit}}
                                                        </td>
                                                        <td>Staff names: {{lb.name}} | {{lb.prof_name}}</td>
                                                    </tr>
                                                    <tr ng-repeat=" rd in radiologyResults" ng-if="rd.admission_id">
                                                        <td class="mdl-data-table__cell--non-numeric">
                                                            {{rd.item_name}} </td>
                                                        <td class="mdl-data-table__cell--non-numeric">
                                                            {{rd.description}}
                                                        </td>
                                                        <td>Staff names: {{rd.name}} | {{rd.prof_name}}</td>
                                                    </tr>
                                                    <tr ng-if="prevMedicines[0].length>0">
                                                        <td colspan="3" style="text-align: left;background-color: rgba(110, 104, 113, 0.41)">
                                                            <strong>Medications</strong></td>
                                                    </tr>
                                                    <tr ng-repeat="med in prevMedicines[0]" ng-if="med.admission_id">
                                                        <td class="mdl-data-table__cell--non-numeric">
                                                            {{med.item_name}}</td>
                                                        <td class="mdl-data-table__cell--non-numeric">{{med.dose}},
                                                            {{med.frequency}},{{'for '+ med.duration}}</td>
                                                        <b  ng-if="med.continuation_status !=null" style="background-color: red">{{med.continuation_status}}-{{med.stoped_by}}</b></td>
                                                        <td>Staff names: {{med.name}} | {{med.prof_name}}</td>

                                                    </tr>
                                                    <tr ng-if="prevMedicines[1].length>0">
                                                        <td colspan="3" style="text-align: left;background-color: rgba(110, 104, 113, 0.41)">
                                                            <strong>Conservative management</strong></td>
                                                    </tr>
                                                    <tr ng-repeat="med in prevMedicines[1]" ng-if="med.admission_id">
                                                        <td ng-if="med.conservatives !=null"  class="mdl-data-table__cell--non-numeric">
                                                        </td>
                                                        <td ng-if="med.conservatives !=null"  class="mdl-data-table__cell--non-numeric">{{med.conservatives}}</td>
                                                        <td ng-if="med.conservatives !=null" >Staff names: {{med.name}} | {{med.prof_name}}</td>

                                                    </tr>
                                                    <tr ng-if="pastProcedures.length>0">
                                                        <td colspan="3" style="text-align: left;background-color: rgba(110, 104, 113, 0.41)">
                                                            <strong>Procedures</strong></td>
                                                    </tr>
                                                    <tr ng-repeat="pro in pastProcedures" ng-if="pro.admission_id">
                                                        <td class="mdl-data-table__cell--non-numeric">{{pro.item_category}}</td>
                                                        <td class="mdl-data-table__cell--non-numeric">
                                                            {{pro.item_name}}</td>
                                                        <td>Staff names: {{pro.name}} | {{pro.prof_name}}</td>
                                                    </tr>
                                                    </tbody>
                                                </table>
                                            </v-pane-content>
                                        </v-pane>
                                    </v-accordion>
                                </md-card-content>
                            </md-card>

                        </div>
                    </div>
                </md-content>
            </md-tab>
			<md-tab label="vital signs" ng-click="getTodaysVitals(selectedPatient)">
                    <md-content class="md-padding">
                        <div layout="row">
                            <div flex="20">
                                <md-list style="color:white;font-weight:700">
                                    <md-list-item style="padding:0;background-color:teal;margin:2px;cursor: pointer;" ng-click="getPatientVitals(vt)" class="md-1-line" ng-repeat="vt in vitalTime">
                                        {{vt.created_at}}
                                    </md-list-item>
                                </md-list>
                            </div>
							<div flex="80">
							<table  ng-if="vitalData.length>0" class="mdl-data-table mdl-js-data-table mdl-data-table--selectable mdl-shadow--2dp" width="100%">
							<thead>
							<th class="mdl-data-table__cell--non-numeric">Name</th>
							<th class="mdl-data-table__cell--non-numeric">Value</th>
							<th class="mdl-data-table__cell--non-numeric">Time taken</th>
							<th class="mdl-data-table__cell--non-numeric">Staff names's names</th>
							</thead>
							<tbody>
							<tr ng-repeat="vt in vitalData">
                                        <td class="mdl-data-table__cell--non-numeric">{{vt.vital_name}}</td>
                                        <td class="mdl-data-table__cell--non-numeric">
                                            {{vt.vital_sign_value}} &nbsp;&nbsp;&nbsp; {{vt.si_unit}}</td>
										<td class="mdl-data-table__cell--non-numeric">{{vt.created_at}}</td>
										<td class="mdl-data-table__cell--non-numeric">{{vt.submited_by}}</td>
                            </tr>
							</tbody>
							</table>
							</div>
                        </div>
                    </md-content>
                </md-tab>
            <md-tab label="Continuation notes" ng-click="getNotes(selectedPatient)">
                <md-content class="md-padding">
                    <div layout="column">
                        <vertical-tabs>
                            <vertical-tab-pane title="Major ward-round">
                                <div layout="row">
                                    <div flex="80">
                                        <ul class="media-list comment-detail-list">
                                            <li class="media" ng-repeat="nt in contiNotes[1]" ng-show="$index < loadIndex">
                                               <br> <article>
                                                    <div class="pull-left comment-info">
                                                        <a href="#" class="author">{{ nt.name }}</a><br />
                                                        <p >{{ nt.prof_name }} | {{ nt.facility_name }}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p>
                                                        <time>{{ nt.created_at | date:"MM/dd/yyyy H:m:s" }}&nbsp;&nbsp;&nbsp;</time>
                                                    </div>
                                                    <div class="media-body">
                                                        <div class="comment-body">
                                                            <p align="justify">{{ nt.notes }}</p>
                                                        </div>
                                                    </div>
                                                </article><br>
                                            </li>
                                        </ul>
                                        <div class="pull-left" id="loadMore" ng-click="showMore()" style="cursor: pointer; color:green;">Show more...</div>
                                        <div class="pull-right" id="showLess" ng-click="showLess()" style="cursor: pointer; color:red;">Show less...</div>
                                    </div>
                                </div>
                                <div layout="row">
                                    <div flex="80">
                                        <md-input-container class="md-block">
                                            <textarea ng-model="notes" placeholder="Write continuation notes here..." id="notez"  md-maxlength="5000" rows="3" md-select-on-focus></textarea>
                                        </md-input-container>
                                        <md-button class="md-raised md-primary pull-right" ng-click="takeNotes(notes,selectedPatient,2)">save</md-button>
                                    </div>
                                </div>
                            </vertical-tab-pane>
                            <vertical-tab-pane title="Service ward-round">
                                <div layout="row">
                                    <div flex="80">
                                        <ul class="media-list comment-detail-list">
                                            <li class="media" ng-repeat="nt in contiNotes[0]" ng-show="$index < loadIndex">
                                               <br> <article>
                                                    <div class="pull-left comment-info">
                                                        <a href="#" class="author">{{ nt.name }}</a><br />
                                                        <p >{{ nt.prof_name }} | {{ nt.facility_name }}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p>
                                                        <time>{{ nt.created_at | date:"MM/dd/yyyy H:m:s" }}&nbsp;&nbsp;&nbsp;</time>
                                                    </div>
                                                    <div class="media-body">
                                                        <div class="comment-body">
                                                            <p align="justify">{{ nt.notes }}</p>
                                                        </div>
                                                    </div>
                                                </article><br>
                                            </li>
                                        </ul>
                                        <div class="pull-left" id="loadMore" ng-click="showMore()" style="cursor: pointer; color:green;">Show more...</div>
                                        <div class="pull-right" id="showLess" ng-click="showLess()" style="cursor: pointer; color:red;">Show less...</div>
                                    </div>
                                </div>
                                <div layout="row">
                                    <div flex="80">
                                        <md-input-container class="md-block">
                                            <textarea ng-model="notes" placeholder="Write continuation notes here..." id="notes"  md-maxlength="5000" rows="3" md-select-on-focus></textarea>
                                        </md-input-container>
                                        <md-button class="md-raised md-primary pull-right" ng-click="takeNotes(notes,selectedPatient,1)">save</md-button>
                                    </div>
                                </div>
                            </vertical-tab-pane>
                        </vertical-tabs>
                    </div>
                </md-content>
            </md-tab>
            <md-tab label="Clerk Sheet">
                <md-content class="md-padding">
                    <!--vertical tabs start-->
                    <vertical-tabs>
                        <vertical-tab-pane title="Complaints">
                            <div layout="row">
                                <div flex="55">
                                    <md-input-container class="md-block">
                                        <input type="text" ng-model="selectedcomplaint" id="complaint"
                                               placeholder="Search Chief Complaints" autocomplete="off"
                                               uib-typeahead="complaint as complaint.name for complaint in complaints($viewValue) |filter:$viewValue ">
                                    </md-input-container>
                                </div>
                                <div flex="15">
                                    <md-select ng-model="qty" id="dxn" autocomplete="off" placeholder="Duration" class="md-no-underline">
                                        <md-option value="1">1</md-option>
                                        <md-option value="2">2</md-option>
                                        <md-option value="3">3</md-option>
                                        <md-option value="4">4</md-option>
                                        <md-option value="5">5</md-option>
                                        <md-option value="6">6</md-option>
                                        <md-option value="7">7</md-option>
                                        <md-option value="8">8</md-option>
                                        <md-option value="9">9</md-option>
                                        <md-option value="10">10</md-option>
                                        <md-option value="11">11</md-option>
                                        <md-option value="12">12</md-option>
                                    </md-select>
                                </div>
                                <div flex="15">
                                    <md-select ng-model="unit" autocomplete="off" id="unit" placeholder="Duration Unit" class="md-no-underline">
                                        <md-option value="Hours">Hours</md-option>
                                        <md-option value="Days">Day(s)</md-option>
                                        <md-option value="Weeks">Weeks</md-option>
                                        <md-option value="Months">Months</md-option>
                                        <md-option value="Years">Years</md-option>
                                    </md-select>
                                </div>
                                <div flex="5"><md-button class="md-raised md-primary" ng-click="addComplaint(selectedcomplaint,qty,unit,selectedPatient)">Add</md-button>
                                </div>
                            </div>
                            <div layout="row">
                                <div flex="50">
                                    <md-input-container class="md-block">
                                        <label>Other complaints</label>
                                        <textarea ng-model="other_complaints" autocomplete="off" id="other_complaints" md-maxlength="5000" rows="3" md-select-on-focus></textarea>
                                    </md-input-container>
                                </div>
                                <div flex="20">
                                    <div ng-repeat="c in complaintz">
                                        {{c.description +' for '+c.duration+' '+c.duration_unit}}&nbsp;&nbsp;&nbsp;
                                        <span ng-click="removeFromSelection(c,complaintz)" class="glyphicon glyphicon-minus-sign"></span>
                                    </div>
                                    <md-button class="md-raised md-primary" ng-click="saveComplaints(complaintz,other_complaints,selectedPatient)">Save</md-button>
                                </div>
                                <div flex="5">
                                </div>
                            </div>
                        </vertical-tab-pane>
                        <vertical-tab-pane title="History of presenting illness">
                            <div layout="row">
                                <div flex="50">
                                    <md-input-container class="md-block">
                                        <label>History of presenting illness</label>
                                        <textarea ng-model="hpi" md-maxlength="5000" id="hpi" autocomplete="off" rows="3" md-select-on-focus></textarea>
                                    </md-input-container>
                                    <md-button class="md-raised md-primary pull-right" ng-click="saveHpi(hpi,selectedPatient)">Save</md-button>
                                </div>
                            </div>
                        </vertical-tab-pane>
                        <vertical-tab-pane title="Review of other systems">
                            <div layout="row">
                                <div flex="25">
                                    <md-input-container class="md-block">
                                        <input type="text" placeholder="Search ENT" autocomplete="off"  id="ent" ng-model="selectedENT" typeahead-on-select="reviewENT($item,selectedPatient)"
                                               uib-typeahead="ent as ent.name for ent in showEnt($viewValue) |filter:$viewValue ">
                                    </md-input-container>
                                </div>
                                <div flex="25">
                                    <md-input-container class="md-block">
                                        <input type="text" placeholder="Search cardiovascular" autocomplete="off" id="cardio" ng-model="selectedCardio" typeahead-on-select="reviewOfSystems($item,selectedPatient)"
                                               uib-typeahead="cardio as cardio.name for cardio in showCardio($viewValue) |filter:$viewValue ">
                                    </md-input-container>
                                </div>
                                <div flex="25">
                                    <md-input-container class="md-block">
                                        <input type="text" placeholder="Search respiratory system" autocomplete="off" id="respiratory" ng-model="selectedRespiratory"
                                               typeahead-on-select="reviewOfSystems2($item,selectedPatient)"
                                               uib-typeahead="resp as resp.name for resp in showRespiratory($viewValue) |filter:$viewValue ">
                                    </md-input-container>
                                </div>
                                <div flex="25">
                                    <md-input-container class="md-block">
                                        <input type="text" placeholder="Search gastrointestinal system" autocomplete="off" id="gastrointestinal" ng-model="selectedGastro"
                                               typeahead-on-select="reviewOfSystems3($item,selectedPatient)"
                                               uib-typeahead="gastro as gastro.name for gastro in showGastro($viewValue) |filter:$viewValue ">
                                    </md-input-container>
                                </div>
                            </div>
                            <div layout="row">
                                <div flex="25">
                                    <md-input-container class="md-block">
                                        <input type="text" placeholder="Search musculoskeletal system" autocomplete="off" id="musculoskeletal" ng-model="selectedMusculo"
                                               typeahead-on-select="reviewOfSystems4($item,selectedPatient)"
                                               uib-typeahead="musculo as musculo.name for musculo in showMusculo($viewValue) |filter:$viewValue ">
                                    </md-input-container>
                                </div>
                                <div flex="25">
                                    <md-input-container class="md-block">
                                        <input type="text" placeholder="Search genitourinary system" autocomplete="off" id="genitourinary" ng-model="selectedGenito"
                                               typeahead-on-select="reviewOfSystems5($item,selectedPatient)"
                                               uib-typeahead="genito as genito.name for genito in showGenito($viewValue) |filter:$viewValue ">
                                    </md-input-container>
                                </div>
                                <div flex="25">
                                    <md-input-container class="md-block">
                                        <input type="text" placeholder="Search central nervous system" autocomplete="off" id="cns" ng-model="selectedCNS" typeahead-on-select="reviewOfSystems6($item,selectedPatient)"
                                               uib-typeahead="cns as cns.name for cns in showCNS($viewValue) |filter:$viewValue ">
                                    </md-input-container>
                                </div>
                                <div flex="25">
                                    <md-input-container class="md-block">
                                        <input type="text" placeholder="Search endocrine system" autocomplete="off" id="endocrine" ng-model="selectedEndo"
                                               typeahead-on-select="reviewOfSystems7($item,selectedPatient)"
                                               uib-typeahead="endo as endo.name for endo in showEndo($viewValue) |filter:$viewValue ">
                                    </md-input-container>
                                </div>
                            </div>
                            <div layout="row">
                                <div flex="50">
                                    <md-input-container class="md-block">
                                        <label>RoS summary</label>
                                        <textarea ng-model="review_summary" id="review_summary" md-maxlength="5000" rows="3" md-select-on-focus></textarea>
                                    </md-input-container>
                                </div>
                                <div flex="45">
                                    <div ng-repeat="resp in rosTemp">{{resp.name}}
                                        -> {{resp.status}}&nbsp;&nbsp;
                                        <span class="glyphicon glyphicon-minus-sign" ng-click="removeFromSelection(resp,rosTemp)"></span></div>
                                </div>
                                <div flex="5">
                                    <md-button class="md-raised md-primary pull-right" ng-click="saveRoS(rosTemp,review_summary)">Save</md-button>
                                </div>
                            </div>
                        </vertical-tab-pane>
                        <vertical-tab-pane title="Past medical and surgical history">
                            <div layout="row">
                                <div flex="30">
                                    <md-input-container class="md-block">
                                        <label>Write past surgical history here...</label>
                                        <textarea ng-model="other_past_medicals.surgeries" autocomplete="off" id="surgeries" md-maxlength="5000" rows="3" md-select-on-focus></textarea>
                                    </md-input-container>
                                </div>
                                <div flex="5"></div>
                                <div flex="30">
                                    <md-input-container class="md-block">
                                        <label>Write past admissions history here...</label>
                                        <textarea ng-model="other_past_medicals.admissions" autocomplete="off" id="admissions" md-maxlength="5000" rows="3" md-select-on-focus></textarea>
                                    </md-input-container>
                                </div>
                                <div flex="5"></div>
                                <div flex="30">
                                    <md-input-container class="md-block">
                                        <label>Write blood transfusion history here...</label>
                                        <textarea ng-model="other_past_medicals.transfusion" id="transfusion" autocomplete="off" md-maxlength="5000" rows="3" md-select-on-focus></textarea>
                                    </md-input-container>
                                </div>
                            </div>
                            <div layout="row">
                                <div flex="30">
                                    <md-input-container class="md-block">
                                        <label>Write immunisation/supplement here...</label>
                                        <textarea ng-model="other_past_medicals.immunisation" id="immunisation" autocomplete="off" md-maxlength="5000" rows="3" md-select-on-focus></textarea>
                                    </md-input-container>
                                </div>
                                <div flex="5"></div>
                                <div flex="30">
                                    <md-input-container class="md-block">
                                        <input type="text" placeholder="Search allergies" id="selectedAllergy" autocomplete="off" ng-model="selectedAllergy" typeahead-on-select="pastMedicals($item,selectedPatient)" uib-typeahead="allergy as allergy.name for allergy in showAllergy($viewValue) |filter:$viewValue ">
                                    </md-input-container>
                                </div>
                                <div flex="5"></div>
                                <div flex="30">
                                    <div ng-repeat="resp in pastTemp">{{resp.name}} - > {{resp.status}}&nbsp;&nbsp;&nbsp; <span class="glyphicon glyphicon-minus-sign" ng-click="removeFromSelection(resp,pastTemp)"></span></div>
                                    <md-button class="md-raised md-primary" ng-click="savePastMedical(pastTemp,other_past_medicals)">save</md-button>
                                </div>

                            </div>
                        </vertical-tab-pane>
                        <vertical-tab-pane title="General examination">
                            <div layout="row">
                                <div flex="50">
                                    <md-input-container class="md-block">
                                        <label>General examination</label>
                                        <textarea ng-model="gen_examination" id="gen_examination" md-maxlength="5000" rows="3" md-select-on-focus></textarea>
                                    </md-input-container>
                                    <md-button class="md-raised md-primary pull-right" ng-click="saveGenExams(selectedPatient,gen_examination)">Save</md-button>
                                </div>
                            </div>
                        </vertical-tab-pane>
                        <vertical-tab-pane title="Local examination">
                            <div flex="50">
                                <md-input-container class="md-block">
                                    <label>Local examination</label>
                                    <textarea ng-model="local_examination" id="local_examination" md-maxlength="5000" rows="5" md-select-on-focus></textarea>
                                </md-input-container>
                                <md-button class="md-raised md-primary pull-right" ng-click="saveLocalExams(selectedPatient,local_examination)">Save</md-button>
                            </div>
                        </vertical-tab-pane>
                        <vertical-tab-pane title="Systemic examination">
                            <md-tabs>
                                <md-tab label="Musculoskeletal">
                                    <div class="col-xs-12 col-md-12 col-sm-12 col-lg-12">
                                        <div class="col-xs-6">
                                            <div class="row">
                                                <div class="row" ng-if="!data.cb">
                                                    <div class="col-xs-6 col-md-6 col-sm-6 col-lg-6">
                                                        <md-input-container class="md-block">
                                                            <input type="text" id="musc_inspect" placeholder="Inspection" typeahead-on-select="physicalMusculo($item,selectedPatient,'Musculoskeletal')"
                                                                   ng-model="selectedInspection"
                                                                   uib-typeahead="inspect as inspect.name for inspect in showInspection($viewValue) |filter:$viewValue ">
                                                        </md-input-container>
                                                    </div>
                                                </div>
                                                <div class="row" ng-if="!data.cb">
                                                    <div class="col-xs-6 col-md-6 col-sm-6 col-lg-6">
                                                        <md-input-container class="md-block">
                                                            <input type="text" id="musc_palpate" placeholder="Palpation" typeahead-on-select="physicalMusculo($item,selectedPatient,'Musculoskeletal')"
                                                                   ng-model="selectedPalpation"
                                                                   uib-typeahead="palpate as palpate.name for palpate in showPalpation($viewValue) |filter:$viewValue "><br>
                                                        </md-input-container>
                                                    </div>
                                                </div>
                                                <div class="row" ng-if="!data.cb">
                                                    <div class="col-xs-6 col-md-6 col-sm-6 col-lg-6">
                                                        <md-input-container class="md-block">
                                                            <input type="text" id="musc_percu" placeholder="Percussion" typeahead-on-select="physicalMusculo($item,selectedPatient,'Musculoskeletal')"
                                                                   ng-model="selectedPercussion"
                                                                   uib-typeahead="percussion as percussion.name for percussion in showPercussion($viewValue) |filter:$viewValue "><br>
                                                        </md-input-container>
                                                    </div>
                                                </div>
                                                <div class="row" ng-if="!data.cb">
                                                    <div class="col-xs-6 col-md-6 col-sm-6 col-lg-6">
                                                        <md-input-container class="md-block">
                                                            <input type="text" id="musc_ausc" placeholder="Auscultation" typeahead-on-select="physicalMusculo($item,selectedPatient,'Musculoskeletal')"
                                                                   ng-model="selectedAuscultation"
                                                                   uib-typeahead="aus as aus.name for aus in showAuscultation($viewValue) |filter:$viewValue "><br>
                                                        </md-input-container>
                                                    </div>
                                                </div>
                                                <md-checkbox ng-model="data.cb" aria-label="other cardio">
                                                    Other Musculoskeletal
                                                </md-checkbox>
                                                <div class="row" ng-if=" data.cb ==true">
                                                    <div class="col-xs-12 col-md-12 col-lg-12">
                                                        <md-input-container class="md-block">
                                                            <label>Other Musculoskeletal</label>
                                                            <textarea ng-model="other_endo" id="musc" md-maxlength="15000" rows="5" md-select-on-focus></textarea>
                                                        </md-input-container>
                                                        <md-button class="md-raised md-primary pull-right" ng-click="saveSystemicSummary(selectedPatient,other_endo,'Musculoskeletal')">Save</md-button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="col-xs-6">
                                            <div class="row">
                                                <table class="table table-bordered table-striped">
                                                    <tr>
                                                        <td>System</td>
                                                        <td>Category</td>
                                                        <td>Observation</td>
                                                        <td>Actions</td>
                                                    </tr>
                                                    <tr ng-repeat="item in physicalMusculoskeletal">
                                                        <td>{{item.system}}</td>
                                                        <td>{{item.category}}</td>
                                                        <td>{{item.observation}}</td>

                                                        <td>
                                                            <a
                                                                    href=""
                                                                    ng-click="removeFromSelection(item,physicalMusculoskeletal)">Remove</a>
                                                        </td>
                                                    </tr>
                                                </table>
                                            </div>
                                            <div class="row">
                                                <md-button ng-click="savePhysicalExamination(physicalMusculoskeletal)" class="md-raised md-primary pull-right">Save</md-button>
                                            </div>
                                        </div>
                                    </div>
                                </md-tab>
                                <md-tab label="Respiratory">
                                    <div class="col-xs-12 col-md-12 col-sm-12 col-lg-12">
                                        <div class="col-xs-6">
                                            <div class="row">
                                                <div class="row" ng-if="!data.cb">
                                                    <div class="col-xs-6 col-md-6 col-sm-6 col-lg-6">
                                                        <md-input-container class="md-block">
                                                            <input type="text" id="resp_inspect" typeahead-on-select="physicalResp($item,selectedPatient,'Respiratory')"
                                                                   placeholder="Inspection"
                                                                   ng-model="selectedInspection1"
                                                                   uib-typeahead="inspect as inspect.name for inspect in showInspection($viewValue) |filter:$viewValue "><br>
                                                        </md-input-container></div>
                                                </div>
                                                <div class="row" ng-if="!data.cb">
                                                    <div class="col-xs-6 col-md-6 col-sm-6 col-lg-6">
                                                        <md-input-container class="md-block">
                                                            <input type="text" id="resp_palpate" typeahead-on-select="physicalResp($item,selectedPatient,'Respiratory')"
                                                                   placeholder="Palpation"
                                                                   ng-model="selectedPalpation1"
                                                                   uib-typeahead="palpate as palpate.name for palpate in showPalpation($viewValue) |filter:$viewValue "><br>
                                                        </md-input-container></div>
                                                </div>
                                                <div class="row" ng-if="!data.cb">
                                                    <div class="col-xs-6 col-md-6 col-sm-6 col-lg-6">
                                                        <md-input-container class="md-block">
                                                            <input type="text" id="resp_percus" typeahead-on-select="physicalResp($item,selectedPatient,'Respiratory')"
                                                                   placeholder="Percussion"
                                                                   ng-model="selectedPercussion1"
                                                                   uib-typeahead="percussion as percussion.name for percussion in showPercussion($viewValue) |filter:$viewValue "><br>
                                                        </md-input-container></div>
                                                </div>
                                                <div class="row" ng-if="!data.cb">
                                                    <div class="col-xs-6 col-md-6 col-sm-6 col-lg-6">
                                                        <md-input-container class="md-block">
                                                            <input type="text" id="resp_aus" typeahead-on-select="physicalResp($item,selectedPatient,'Respiratory')"
                                                                   placeholder="Auscultation"
                                                                   ng-model="selectedAuscultation1"
                                                                   uib-typeahead="aus as aus.name for aus in showAuscultation($viewValue) |filter:$viewValue "><br>
                                                        </md-input-container> </div>
                                                </div>
                                                <md-checkbox ng-model="data.cb" aria-label="other resp">
                                                    Other Respiratory
                                                </md-checkbox>
                                                <div class="row" ng-if=" data.cb ==true">
                                                    <div class="col-xs-12 col-md-12 col-lg-12">
                                                        <md-input-container class="md-block">
                                                            <label>Other Respiratory</label>
                                                            <textarea ng-model="other_endo" id="resp" md-maxlength="15000" rows="5" md-select-on-focus></textarea>
                                                        </md-input-container>
                                                        <md-button class="md-raised md-primary pull-right" ng-click="saveSystemicSummary(selectedPatient,other_endo,'Respiratory')">Save</md-button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="col-xs-6">
                                            <div class="row">
                                                <table class="table table-bordered table-striped">
                                                    <tr>
                                                        <td>System</td>
                                                        <td>Category</td>
                                                        <td>Observation</td>
                                                        <td>Actions</td>
                                                    </tr>
                                                    <tr ng-repeat="item in physicalRespiratory">
                                                        <td>{{item.system}}</td>
                                                        <td>{{item.category}}</td>
                                                        <td>{{item.observation}}</td>

                                                        <td>
                                                            <a
                                                                    href=""
                                                                    ng-click="removeFromSelection(item,physicalRespiratory)">Remove</a>
                                                        </td>
                                                    </tr>
                                                </table>
                                            </div>
                                            <div class="row">
                                                <md-button ng-click="savePhysicalExamination(physicalRespiratory)" class="md-raised md-primary pull-right">Save</md-button>
                                            </div>
                                        </div>
                                    </div>
                                </md-tab>
                                <md-tab label="Cardiovascular">
                                    <div class="col-xs-12 col-md-12 col-sm-12 col-lg-12">
                                        <div class="col-xs-6">
                                            <div class="row">
                                                <div class="row" ng-if="!data.cb">
                                                    <div class="col-xs-6 col-md-6 col-sm-6 col-lg-6">
                                                        <md-input-container class="md-block">
                                                            <input type="text" id="cardio_inspect" typeahead-on-select="physicalCardio($item,selectedPatient,'Cardiovascular')"
                                                                   placeholder="Inspection"
                                                                   ng-model="selectedInspection2"
                                                                   uib-typeahead="inspect as inspect.name for inspect in showInspection($viewValue) |filter:$viewValue "><br>
                                                        </md-input-container> </div>
                                                </div>
                                                <div class="row" ng-if="!data.cb">
                                                    <div class="col-xs-6 col-md-6 col-sm-6 col-lg-6">
                                                        <md-input-container class="md-block">
                                                            <input type="text" id="cardio_palpate" typeahead-on-select="physicalCardio($item,selectedPatient,'Cardiovascular')"
                                                                   placeholder="Palpation"
                                                                   ng-model="selectedPalpation2"
                                                                   uib-typeahead="palpate as palpate.name for palpate in showPalpation($viewValue) |filter:$viewValue "><br>
                                                        </md-input-container> </div>
                                                </div>
                                                <div class="row" ng-if="!data.cb">
                                                    <div class="col-xs-6 col-md-6 col-sm-6 col-lg-6">
                                                        <md-input-container class="md-block">
                                                            <input type="text" id="cardio_percus" typeahead-on-select="physicalCardio($item,selectedPatient,'Cardiovascular')"
                                                                   placeholder="Percussion"
                                                                   ng-model="selectedPercussion2"
                                                                   uib-typeahead="percussion as percussion.name for percussion in showPercussion($viewValue) |filter:$viewValue "><br>
                                                        </md-input-container></div>
                                                </div>
                                                <div class="row" ng-if="!data.cb">
                                                    <div class="col-xs-6 col-md-6 col-sm-6 col-lg-6">
                                                        <md-input-container class="md-block">
                                                            <input type="text" id="cardio_aus" typeahead-on-select="physicalCardio($item,selectedPatient,'Cardiovascular')"
                                                                   placeholder="Auscultation"
                                                                   ng-model="selectedAuscultation2"
                                                                   uib-typeahead="aus as aus.name for aus in showAuscultation($viewValue) |filter:$viewValue "><br>
                                                        </md-input-container> </div>
                                                </div>
                                                <md-checkbox ng-model="data.cb" aria-label="other cardio">
                                                    Other Cardiovascular
                                                </md-checkbox>
                                                <div class="row" ng-if=" data.cb ==true">
                                                    <div class="col-xs-12 col-md-12 col-lg-12">
                                                        <md-input-container class="md-block">
                                                            <label>Other Cardiovascular</label>
                                                            <textarea ng-model="other_endo" id="cardiov" md-maxlength="15000" rows="5" md-select-on-focus></textarea>
                                                        </md-input-container>
                                                        <md-button class="md-raised md-primary pull-right" ng-click="saveSystemicSummary(selectedPatient,other_endo,'Cardiovascular')">Save</md-button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="col-xs-6">
                                            <div class="row">
                                                <table class="table table-bordered table-striped">
                                                    <tr>
                                                        <td>System</td>
                                                        <td>Category</td>
                                                        <td>Observation</td>
                                                        <td>Actions</td>
                                                    </tr>
                                                    <tr ng-repeat="item in physicalCardiovascular">
                                                        <td>{{item.system}}</td>
                                                        <td>{{item.category}}</td>
                                                        <td>{{item.observation}}</td>

                                                        <td>
                                                            <a
                                                                    href=""
                                                                    ng-click="removeFromSelection(item,physicalCardiovascular)">Remove</a>
                                                        </td>
                                                    </tr>
                                                </table>
                                            </div>
                                            <div class="row">
                                                <md-button ng-click="savePhysicalExamination(physicalCardiovascular)" class="md-raised md-primary pull-right">Save</md-button>
                                            </div>
                                        </div>
                                    </div>
                                </md-tab>
                                <md-tab label="Gastrointestinal">
                                    <div class="col-xs-12 col-md-12 col-sm-12 col-lg-12">
                                        <div class="col-xs-6">
                                            <div class="row">
                                                <div class="row" ng-if="!data.cb">
                                                    <div class="col-xs-6 col-md-6 col-sm-6 col-lg-6">
                                                        <md-input-container class="md-block">
                                                            <input type="text" id="gastro_inspect" typeahead-on-select="physicalGastro($item,selectedPatient,'Gastrointestinal')"
                                                                   placeholder="Inspection"
                                                                   ng-model="selectedInspection3"
                                                                   uib-typeahead="inspect as inspect.name for inspect in showInspection($viewValue) |filter:$viewValue "><br>
                                                        </md-input-container> </div>
                                                </div>
                                                <div class="row" ng-if="!data.cb">
                                                    <div class="col-xs-6 col-md-6 col-sm-6 col-lg-6">
                                                        <md-input-container class="md-block">
                                                            <input type="text" id="gastro_palpate" typeahead-on-select="physicalGastro($item,selectedPatient,'Gastrointestinal')"
                                                                   placeholder="Palpation"
                                                                   ng-model="selectedPalpation3"
                                                                   uib-typeahead="palpate as palpate.name for palpate in showPalpation($viewValue) |filter:$viewValue "><br>
                                                        </md-input-container></div>
                                                </div>
                                                <div class="row" ng-if="!data.cb">
                                                    <div class="col-xs-6 col-md-6 col-sm-6 col-lg-6">
                                                        <md-input-container class="md-block">
                                                            <input type="text" id="gastro_percus" typeahead-on-select="physicalGastro($item,selectedPatient,'Gastrointestinal')"
                                                                   placeholder="Percussion"
                                                                   ng-model="selectedPercussion3"
                                                                   uib-typeahead="percussion as percussion.name for percussion in showPercussion($viewValue) |filter:$viewValue "><br>
                                                        </md-input-container> </div>
                                                </div>
                                                <div class="row" ng-if="!data.cb">
                                                    <div class="col-xs-6 col-md-6 col-sm-6 col-lg-6">
                                                        <md-input-container class="md-block">
                                                            <input type="text" id="gastro_aus" typeahead-on-select="physicalGastro($item,selectedPatient,'Gastrointestinal')"
                                                                   placeholder="Auscultation"
                                                                   ng-model="selectedAuscultation3"
                                                                   uib-typeahead="aus as aus.name for aus in showAuscultation($viewValue) |filter:$viewValue "><br>
                                                        </md-input-container></div>
                                                </div>
                                                <md-checkbox ng-model="data.cb" aria-label="other genital">
                                                    Other Gastrointestinal
                                                </md-checkbox>
                                                <div class="row" ng-if=" data.cb ==true">
                                                    <div class="col-xs-12 col-md-12 col-lg-12">
                                                        <md-input-container class="md-block">
                                                            <label>Other Gastrointestinal</label>
                                                            <textarea ng-model="other_endo" id="gastro" md-maxlength="15000" rows="5" md-select-on-focus></textarea>
                                                        </md-input-container>
                                                        <md-button class="md-raised md-primary pull-right" ng-click="saveSystemicSummary(selectedPatient,other_endo,'Gastrointestinal')">Save</md-button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="col-xs-6">
                                            <div class="row">
                                                <table class="table table-bordered table-striped">
                                                    <tr>
                                                        <td>System</td>
                                                        <td>Category</td>
                                                        <td>Observation</td>
                                                        <td>Actions</td>
                                                    </tr>
                                                    <tr ng-repeat="item in physicalGastrointestinal">
                                                        <td>{{item.system}}</td>
                                                        <td>{{item.category}}</td>
                                                        <td>{{item.observation}}</td>

                                                        <td>
                                                            <a
                                                                    href=""
                                                                    ng-click="removeFromSelection(item,physicalGastrointestinal)">Remove</a>
                                                        </td>
                                                    </tr>
                                                </table>
                                            </div>
                                            <div class="row">
                                                <md-button ng-click="savePhysicalExamination(physicalGastrointestinal)" class="md-raised md-primary pull-right">Save</md-button>
                                            </div>
                                        </div>
                                    </div>
                                </md-tab>
                                <md-tab label="Genitourinary">
                                    <div class="col-xs-12 col-md-12 col-sm-12 col-lg-12">
                                        <div class="col-xs-6">
                                            <div class="row">
                                                <div class="row" ng-if="!data.cb">
                                                    <div class="col-xs-6 col-md-6 col-sm-6 col-lg-6">
                                                        <md-input-container class="md-block">
                                                            <input type="text" id="genito_inspect" typeahead-on-select="physicalGenito($item,selectedPatient,'Genitourinary')"
                                                                   placeholder="Inspection"
                                                                   ng-model="selectedInspection4"
                                                                   uib-typeahead="inspect as inspect.name for inspect in showInspection($viewValue) |filter:$viewValue "><br>
                                                        </md-input-container> </div>
                                                </div>
                                                <div class="row" ng-if="!data.cb">
                                                    <div class="col-xs-6 col-md-6 col-sm-6 col-lg-6">
                                                        <md-input-container class="md-block">
                                                            <input type="text" id="genito_palpate" typeahead-on-select="physicalGenito($item,selectedPatient,'Genitourinary')"
                                                                   placeholder="Palpation"
                                                                   ng-model="selectedPalpation4"
                                                                   uib-typeahead="palpate as palpate.name for palpate in showPalpation($viewValue) |filter:$viewValue "><br>
                                                        </md-input-container> </div>
                                                </div>
                                                <div class="row" ng-if="!data.cb">
                                                    <div class="col-xs-6 col-md-6 col-sm-6 col-lg-6">
                                                        <md-input-container class="md-block">
                                                            <input type="text" id="genito_percus" typeahead-on-select="physicalGenito($item,selectedPatient,'Genitourinary')"
                                                                   placeholder="Percussion"
                                                                   ng-model="selectedPercussion4"
                                                                   uib-typeahead="percussion as percussion.name for percussion in showPercussion($viewValue) |filter:$viewValue "><br>
                                                        </md-input-container></div>
                                                </div>
                                                <div class="row" ng-if="!data.cb">
                                                    <div class="col-xs-6 col-md-6 col-sm-6 col-lg-6">
                                                        <md-input-container class="md-block">
                                                            <input type="text" id="genito_aus" typeahead-on-select="physicalGenito($item,selectedPatient,'Genitourinary')"
                                                                   placeholder="Auscultation"
                                                                   ng-model="selectedAuscultation4"
                                                                   uib-typeahead="aus as aus.name for aus in showAuscultation($viewValue) |filter:$viewValue "><br>
                                                        </md-input-container></div>
                                                </div>
                                                <md-checkbox ng-model="data.cb" aria-label="other genital">
                                                    Other Genitourinary
                                                </md-checkbox>
                                                <div class="row" ng-if=" data.cb ==true">
                                                    <div class="col-xs-12 col-md-12 col-lg-12">
                                                        <md-input-container class="md-block">
                                                            <label>Other Genitourinary</label>
                                                            <textarea ng-model="other_endo" id="genital" md-maxlength="15000" rows="5" md-select-on-focus></textarea>
                                                        </md-input-container>
                                                        <md-button class="md-raised md-primary pull-right" ng-click="saveSystemicSummary(selectedPatient,other_endo,'Genitourinary')">Save</md-button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="col-xs-6">
                                            <div class="row">
                                                <table class="table table-bordered table-striped">
                                                    <tr>
                                                        <td>System</td>
                                                        <td>Category</td>
                                                        <td>Observation</td>
                                                        <td>Actions</td>
                                                    </tr>
                                                    <tr ng-repeat="item in physicalGenitourinary">
                                                        <td>{{item.system}}</td>
                                                        <td>{{item.category}}</td>
                                                        <td>{{item.observation}}</td>

                                                        <td>
                                                            <a
                                                                    href=""
                                                                    ng-click="removeFromSelection(item,physicalGenitourinary)">Remove</a>
                                                        </td>
                                                    </tr>
                                                </table>
                                            </div>
                                            <div class="row">
                                                <md-button ng-click="savePhysicalExamination(physicalGenitourinary)" class="md-raised md-primary pull-right">Save</md-button>
                                            </div>
                                        </div>
                                    </div>
                                </md-tab>
                                <md-tab label="CNS">
                                    <div class="col-xs-12 col-md-12 col-sm-12 col-lg-12">
                                        <div class="col-xs-6">
                                            <div class="row">
                                                <div class="row" ng-if="!data.cb">
                                                    <div class="col-xs-6 col-md-6 col-sm-6 col-lg-6">
                                                        <md-input-container class="md-block">
                                                            <input type="text" id="cns_inspect" typeahead-on-select="physicalCns($item,selectedPatient,'Central Nervous System')"
                                                                   placeholder="Inspection"
                                                                   ng-model="selectedInspection5"
                                                                   uib-typeahead="inspect as inspect.name for inspect in showInspection($viewValue) |filter:$viewValue "><br>
                                                        </md-input-container> </div>
                                                </div>
                                                <div class="row" ng-if="!data.cb">
                                                    <div class="col-xs-6 col-md-6 col-sm-6 col-lg-6">
                                                        <md-input-container class="md-block">
                                                            <input type="text" id="cns_palpate" typeahead-on-select="physicalCns($item,selectedPatient,'Central Nervous System')"
                                                                   placeholder="Palpation"
                                                                   ng-model="selectedPalpation5"
                                                                   uib-typeahead="palpate as palpate.name for palpate in showPalpation($viewValue) |filter:$viewValue "><br>
                                                        </md-input-container> </div>
                                                </div>
                                                <div class="row" ng-if="!data.cb">
                                                    <div class="col-xs-6 col-md-6 col-sm-6 col-lg-6">
                                                        <md-input-container class="md-block">
                                                            <input type="text" id="cns_percus" typeahead-on-select="physicalCns($item,selectedPatient,'Central Nervous System')"
                                                                   placeholder="Percussion"
                                                                   ng-model="selectedPercussion5"
                                                                   uib-typeahead="percussion as percussion.name for percussion in showPercussion($viewValue) |filter:$viewValue "><br>
                                                        </md-input-container></div>
                                                </div>
                                                <div class="row" ng-if="!data.cb">
                                                    <div class="col-xs-6 col-md-6 col-sm-6 col-lg-6">
                                                        <md-input-container class="md-block">
                                                            <input type="text" id="cns_aus" typeahead-on-select="physicalCns($item,selectedPatient,'Central Nervous System')"
                                                                   placeholder="Auscultation"
                                                                   ng-model="selectedAuscultation5"
                                                                   uib-typeahead="aus as aus.name for aus in showAuscultation($viewValue) |filter:$viewValue "><br>
                                                        </md-input-container></div>
                                                </div>
                                                <md-checkbox ng-model="data.cb" aria-label="other cns">
                                                    Other CNS
                                                </md-checkbox>
                                                <div class="row" ng-if=" data.cb ==true">
                                                    <div class="col-xs-12 col-md-12 col-lg-12">
                                                        <md-input-container class="md-block">
                                                            <label>Other CNS</label>
                                                            <textarea ng-model="other_endo" id="central" md-maxlength="15000" rows="5" md-select-on-focus></textarea>
                                                        </md-input-container>
                                                        <md-button class="md-raised md-primary pull-right" ng-click="saveSystemicSummary(selectedPatient,other_endo,'Central Nervous System')">Save</md-button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="col-xs-6">
                                            <div class="row">
                                                <table class="table table-bordered table-striped">
                                                    <tr>
                                                        <td>System</td>
                                                        <td>Category</td>
                                                        <td>Observation</td>
                                                        <td>Actions</td>
                                                    </tr>
                                                    <tr ng-repeat="item in physicalCNS">
                                                        <td>{{item.system}}</td>
                                                        <td>{{item.category}}</td>
                                                        <td>{{item.observation}}</td>

                                                        <td>
                                                            <a
                                                                    href=""
                                                                    ng-click="removeFromSelection(item,physicalCNS)">Remove</a>
                                                        </td>
                                                    </tr>
                                                </table>
                                            </div>
                                            <div class="row">
                                                <md-button ng-click="savePhysicalExamination(physicalCNS)" class="md-raised md-primary pull-right">Save</md-button>
                                            </div>
                                        </div>
                                    </div>
                                </md-tab>
                                <md-tab label="Endocrine">
                                    <div class="col-xs-12 col-md-12 col-sm-12 col-lg-12">
                                        <div class="col-xs-6">
                                            <div class="row">
                                                <div class="row" ng-if="!data.cb">
                                                    <div class="col-xs-6 col-md-6 col-sm-6 col-lg-6">
                                                        <md-input-container class="md-block">
                                                            <input type="text" id="endo_inspect" typeahead-on-select="physicalEndo($item,selectedPatient,'Endocrine')"
                                                                   placeholder="Inspection"
                                                                   ng-model="selectedInspection6"
                                                                   uib-typeahead="inspect as inspect.name for inspect in showInspection($viewValue) |filter:$viewValue "><br>
                                                        </md-input-container> </div>
                                                </div>
                                                <div class="row" ng-if="!data.cb">
                                                    <div class="col-xs-6 col-md-6 col-sm-6 col-lg-6">
                                                        <md-input-container class="md-block">
                                                            <input type="text" id="endo_palpate" typeahead-on-select="physicalEndo($item,selectedPatient,'Endocrine')"
                                                                   placeholder="Palpation"
                                                                   ng-model="selectedPalpation6"
                                                                   uib-typeahead="palpate as palpate.name for palpate in showPalpation($viewValue) |filter:$viewValue "><br>
                                                        </md-input-container> </div>
                                                </div>
                                                <div class="row" ng-if="!data.cb">
                                                    <div class="col-xs-6 col-md-6 col-sm-6 col-lg-6">
                                                        <md-input-container class="md-block">
                                                            <input type="text" id="endo_percus" typeahead-on-select="physicalEndo($item,selectedPatient,'Endocrine')"
                                                                   placeholder="Percussion"
                                                                   ng-model="selectedPercussion6"
                                                                   uib-typeahead="percussion as percussion.name for percussion in showPercussion($viewValue) |filter:$viewValue "><br>
                                                        </md-input-container></div>
                                                </div>
                                                <div class="row" ng-if="!data.cb">
                                                    <div class="col-xs-6 col-md-6 col-sm-6 col-lg-6">
                                                        <md-input-container class="md-block">
                                                            <input type="text" id="endo_aus" typeahead-on-select="physicalEndo($item,selectedPatient,'Endocrine')"
                                                                   t placeholder="Auscultation"
                                                                   ng-model="selectedAuscultation6"
                                                                   uib-typeahead="aus as aus.name for aus in showAuscultation($viewValue) |filter:$viewValue "><br>
                                                        </md-input-container> </div>
                                                </div>
                                                <md-checkbox ng-model="data.cb" aria-label="other endocrine">
                                                    Other Endocrine
                                                </md-checkbox>
                                                <div class="row" ng-if=" data.cb ==true">
                                                    <div class="col-xs-12 col-md-12 col-lg-12">
                                                        <md-input-container class="md-block">
                                                            <label>Other Endocrine</label>
                                                            <textarea ng-model="other_endo" id="endo" md-maxlength="15000" rows="5" md-select-on-focus></textarea>
                                                        </md-input-container>
                                                        <md-button class="md-raised md-primary pull-right" ng-click="saveSystemicSummary(selectedPatient,other_endo,'Endocrine')">Save</md-button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="col-xs-6">
                                            <div class="row">
                                                <table class="table table-bordered table-striped">
                                                    <tr>
                                                        <td>System</td>
                                                        <td>Category</td>
                                                        <td>Observation</td>
                                                        <td>Actions</td>
                                                    </tr>
                                                    <tr ng-repeat="item in physicalEndocrine">
                                                        <td>{{item.system}}</td>
                                                        <td>{{item.category}}</td>
                                                        <td>{{item.observation}}</td>

                                                        <td>
                                                            <a
                                                                    href=""
                                                                    ng-click="removeFromSelection(item,physicalEndocrine)">Remove</a>
                                                        </td>
                                                    </tr>
                                                </table>
                                            </div>
                                            <div class="row">
                                                <md-button ng-click="savePhysicalExamination(physicalEndocrine)" class="md-raised md-primary pull-right">Save</md-button>
                                            </div>
                                        </div>
                                    </div>
                                </md-tab>
                                <md-tab label="summary">
                                    <md-input-container class="md-block">
                                        <label>Systemic examinations summary</label>
                                        <textarea ng-model="summary_examination" id="summary_examination" md-maxlength="5000" rows="5" md-select-on-focus></textarea>
                                    </md-input-container>
                                    <md-button class="md-raised md-primary pull-right" ng-click="saveSummaryExams(selectedPatient,summary_examination)">Save</md-button>
                                </md-tab>
                            </md-tabs>
                        </vertical-tab-pane>
                    </vertical-tabs>
                    <!--vertical tabs end-->
                </md-content>
            </md-tab>
            <md-tab label="Diagnosis">
                <md-content class="md-padding">
                    <div layout="row">
                        <div flex="40">
                            <md-input-container class="md-block">
                                <input type="text" ng-model="selectedProvisional" typeahead-on-select="addProv($item,selectedPatient,'Provisional')"
                                       placeholder="Provisional diagnosis"
                                       uib-typeahead="prov as prov.description+' '+prov.code for prov in showDiagnosis($viewValue) | filter:$viewValue ">
                            </md-input-container>
                        </div>
                        <div flex="10"></div>
                        <div flex="40">
                            <md-input-container class="md-block">
                                <input type="text" ng-model="selectedDifferential" typeahead-on-select="addDiff($item,selectedPatient,'Differential')"
                                       placeholder="Differential diagnosis"
                                       uib-typeahead="diff as diff.description+' '+diff.code for diff in showDiagnosis($viewValue) | filter:$viewValue ">
                            </md-input-container>
                        </div>
                        <div flex="20" ng-if="diagnosisTemp.length>0">
                            <md-list>
                                <md-list-item  class="md-2-line" ng-repeat="prov in diagnosisTemp">
                                    {{prov.description}}-->{{prov.status}}  <span class="glyphicon glyphicon-minus-sign" ng-click="removeFromSelection(prov,diagnosisTemp)"></span>
                                </md-list-item>
                            </md-list>
                            <md-button class="md-raised md-primary pull-right" ng-click="saveDiagnosis(diagnosisTemp)">Save</md-button>
                        </div>
                    </div>
                </md-content>
            </md-tab>
            <md-tab label="investigation" ng-click="getSubDepts()">
                    <div layout="row">
                        <div flex="20">
                            <md-list style="color:white;font-weight:700">
                                <md-list-item style="padding:0;background-color:teal;margin:2px;" ng-click="getTests(sub.id,selectedPatient)" class="md-1-line" ng-repeat="sub in subDepartments" style="cursor: pointer;">
                                    {{sub.sub_department_name}}
                                </md-list-item>
                            </md-list>

                        </div>
                        <div flex="80" ng-if="!data.iv">
                            <md-card>
                                <md-card-content>
                                    <md-input-container class="md-block">
                                        <input type="text" ng-model="search" placeholder="Search here...">
                                    </md-input-container>
                                    <md-grid-list md-cols="3" md-gutter="1em" md-row-height="4:1">
                                        <md-grid-tile   layout="row" layout-align="start start" style="border:#c0c0c0 solid 2px;" ng-repeat="panel in panels | filter:search">
                                            <md-checkbox ng-model="checked" ng-change="orders(test,checked,selectedPatient)" aria-label="Checkbox">
                                                {{ panel.item_name+' - '+panel.price+' Tshs'}}
                                            </md-checkbox>
                                        </md-grid-tile>
                                    </md-grid-list>
                                    <di>
                                        <div></div>
                                    </di>
                                    <md-grid-list md-cols="3" md-gutter="1em" md-row-height="4:1">
                                        <md-grid-tile  layout="row" layout-align="start start" style="border:#c0c0c0 solid 2px;" ng-repeat="test in singleTests | filter:search">
                                            <md-checkbox ng-model="checked" ng-change="orders(test,checked,selectedPatient)" aria-label="Checkbox">
                                                {{ test.item_name+' - '+test.price+' Tshs'}}
                                            </md-checkbox>
                                        </md-grid-tile>
                                    </md-grid-list>
                                    <md-grid-list md-cols="3" md-gutter="1em" md-row-height="4:1">
                                        <md-grid-tile  layout="row" layout-align="start start" style="border:#c0c0c0 solid 2px;" ng-repeat="test in labTests | filter:search">
                                            <md-checkbox ng-model="checked" ng-change="orders(test,checked,selectedPatient)" aria-label="Checkbox">
                                                {{ test.item_name+' - '+test.price+' Tshs'}}
                                            </md-checkbox>
                                        </md-grid-tile>
                                    </md-grid-list>
                                </md-card-content>
                            </md-card>
                        </div>
                        <div flex="80" ng-if="data.iv">
                            <md-button class="md-raised md-primary" ng-click="orderedInvestigations(selectedPatient)">load investigations</md-button>
                            <table class="mdl-data-table mdl-js-data-table mdl-data-table--selectable mdl-shadow--2dp" width="100%">
                                <thead>
                                <th class="mdl-data-table__cell--non-numeric">Date ordered</th>
                                <th class="mdl-data-table__cell--non-numeric">Investigation name</th>
                                <th class="mdl-data-table__cell--non-numeric">Results</th>
                                <th class="mdl-data-table__cell--non-numeric">Doctor's name</th>
                                <th class="mdl-data-table__cell--non-numeric">Doctor's contacts</th>
                                </thead>
                                <tr ng-repeat="item in doneInvestigations">
                                    <td class="mdl-data-table__cell--non-numeric">{{item.date_ordered}}</td>
                                    <td class="mdl-data-table__cell--non-numeric">{{item.item_name}}</td>
                                    <td class="mdl-data-table__cell--non-numeric">{{item.description}}</td>
                                    <td class="mdl-data-table__cell--non-numeric">{{item.name}}</td>
                                    <td class="mdl-data-table__cell--non-numeric">{{item.mobile_number}}</td>
                                </tr>
                            </table>
                        </div>
                    </div>
                    <div layout="row" ng-if="investigationOrders.length>0 || unavailableOrders.length>0">
                        <div flex="20">
                            <md-list>
                                <h3 style="color:white;padding:3px;background-color:teal;margin:2px;">Selected orders</h3>
                                <md-list-item ng-repeat="lab in investigationOrders">
                                    {{lab.item_name+' - '+lab.price+' Tshs'}} &nbsp;
                                    <span class="glyphicon glyphicon-minus-sign" ng-click="removeFromSelection(lab,investigationOrders)"></span>
                                </md-list-item>
                                <md-list-item ng-repeat="lab in unavailableOrders">
                                    {{lab.item_name+' - '+lab.price+' Tshs'}} &nbsp;
                                    <span class="glyphicon glyphicon-minus-sign" ng-click="removeFromSelection(lab,unavailableOrders)"></span>
                                </md-list-item>
                            </md-list>
                        </div>
                        <div flex="40">
                            <md-input-container class="md-block">
                                <label>Write clinical summary here...</label>
                                <textarea ng-model="inv.clinical_note" id="clinical_note" md-maxlength="5000" rows="3" md-select-on-focus></textarea>
                            </md-input-container>
                        </div>
                        <div flex="5"></div>
                        <div flex="10">
                            <md-select ng-model="inv.priority" id="priority" placeholder="Priority" class="md-no-underline">
                                <md-option value="Routine">Routine</md-option>
                                <md-option value="Urgent">Urgent</md-option>
                            </md-select>
                        </div>
                        <div flex="20">
                            <md-button class="md-raised md-primary " ng-click="saveInvestigation(inv,investigationOrders)">Save</md-button>
                        </div>
                    </div>
                    <div layout="row">
                        <div flex="85"></div>
                        <div flex="10">
                            <md-checkbox ng-model="data.iv" aria-label="prev invest">
                                Previous Investigation
                            </md-checkbox>
                        </div>
                        <div flex="5"></div>
                    </div>

                </md-tab>
            <md-tab label="results">
                <md-content class="md-padding">
                    <div layout="row">
                        <div flex="55">
                            <v-accordion class="vAccordion--default">
                                <v-pane>
                                    <v-pane-header>
                                        Lab results
                                    </v-pane-header>

                                    <v-pane-content>
                                        <div layout="row">
                                            <div flex="20">
                                                <md-list style="color:white;font-weight:700">
                                                    <md-list-item style="padding:0;background-color:teal;margin:2px;cursor: pointer;" ng-click="getLabResults(lab)" class="md-1-line" ng-repeat="lab in labInvestigations">
                                                        {{lab.date_attended}}
                                                    </md-list-item>
                                                </md-list>
                                            </div>
                                            <div flex="80">
                                                <table class="full-width">
                                                    <thead ng-if="labResults.length>0">
                                                    <td class="mdl-data-table__cell--non-numeric">Investigation</td>
                                                    <td class="mdl-data-table__cell--non-numeric">Description</td>
                                                    <td class="mdl-data-table__cell--non-numeric" ng-if="!rs.attached_image"></td>
                                                    <td class="mdl-data-table__cell--non-numeric" ng-if="rs.attached_image">Attachment</td>
                                                    <td class="mdl-data-table__cell--non-numeric"></td>
                                                    <td class="mdl-data-table__cell--non-numeric">Remarks</td>
                                                    <td class="mdl-data-table__cell--non-numeric">Verifier</td>
                                                    <td class="mdl-data-table__cell--non-numeric">Date</td>
                                                    </thead>
                                                    <tbody>
                                                    <tr ng-repeat="rs in labResults">
                                                        <td class="mdl-data-table__cell--non-numeric">{{rs.item_name}}</td>
                                                        <td class="mdl-data-table__cell--non-numeric">{{rs.description}} &nbsp;{{rs.units}}</td>
                                                        <td class="mdl-data-table__cell--non-numeric" ng-if="!rs.attached_image"> </td>
                                                        <td class="mdl-data-table__cell--non-numeric" ng-if="rs.attached_image"><md-button ng-click="getAttachedDocument(rs)">attachment</md-button></td>
                                                        <td class="mdl-data-table__cell--non-numeric"  ng-if="!rs.remarks"> </td>
                                                        <td class="mdl-data-table__cell--non-numeric" >{{rs.remarks}} </td>
                                                        <td class="mdl-data-table__cell--non-numeric" >{{rs.name}} </td>
                                                        <td class="mdl-data-table__cell--non-numeric">{{rs.created_at}}</td>
                                                    </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </v-pane-content>
                                </v-pane>

                                <v-pane>
                                    <v-pane-header>
                                        Imaging results
                                    </v-pane-header>

                                    <v-pane-content>
                                        <div layout="row">
                                            <div flex="20">
                                                <md-list style="color:white;font-weight:700">
                                                    <md-list-item style="padding:0;background-color:teal;margin:2px;cursor: pointer;" ng-repeat="rad in radiology" ng-click="getRadResults(rad)" class="md-1-line">
                                                        {{rad.date_attended}}
                                                    </md-list-item>
                                                </md-list>
                                            </div>
                                            <div flex="85" style="padding-top:3em;" layout="column">
                                                <div style="margin-bottom:2em;" flex-gt-sm="70"  ng-repeat="img in radResults">
                                                    <p align="center">{{img.item_name}}</p>
                                                    <zoom ng-if="img.attached_image" image-width="5000" image-src="/uploads/{{img.attached_image}}"></zoom>
                                                    <br>
                                                    <p align="center">{{img.description}} &lt;<a href="/uploads/{{img.attached_image}}" target = "_blank">Enlarge Image...</a>&gt;</p>
                                                    <br>
                                                    <p align="center">{{img.remarks}}</p>
                                                </div>
                                            </div>
                                        </div>
                                    </v-pane-content>
                                </v-pane>
                            </v-accordion>
                        </div>
                        <div flex="5"></div>
                        <div flex="35">
                            <div class="panel panel-default">
                                <div class="panel-heading ">Confirmed Diagnosis</div>
                                <div class="panel-body">
                                    <md-input-container class="md-block">
                                        <input type="text" ng-model="selectedConfirmed" typeahead-on-select="addConf($item,selectedPatient,'Confirmed')"
                                               placeholder="Type ICD code or diagnosis to  Search"
                                               uib-typeahead="conf as conf.description+' '+conf.code for conf in showDiagnosis($viewValue) | filter:$viewValue ">
                                    </md-input-container>
                                    <div class="row" ng-repeat="conf in diagnosisTemp"><br> {{conf.description}}&nbsp;&nbsp;&nbsp;
                                        <span class="glyphicon glyphicon-minus-sign" ng-click="removeFromSelection(conf,diagnosisTemp)"></span>
                                    </div>
                                    <br>
                                    <md-button class="md-raised md-primary pull-right" ng-click="saveDiagnosis(diagnosisTemp, selectedPatient)">Save</md-button>
                                </div>
                            </div>
                        </div>
                    </div>
                </md-content>
            </md-tab>
            <md-tab label="Treatments">
                <md-content class="md-padding">
                    <!--vertical tabs start-->
                    <vertical-tabs>
                        <vertical-tab-pane title="Medication">
                            <div layout="row">
                                <div flex="35">
                                    <md-input-container class="md-block">
                                        <input type="text"
                                               id="item_search"
                                               placeholder="Search Drug by Name"
                                               ng-model="selectedItem" autocomplete="off"
                                               typeahead-on-select="checkDosage($item,selectedPatient.patient_id)"
                                               uib-typeahead="item as item.item_name for item in searchItems($viewValue,selectedPatient) | filter:$viewValue ">
                                    </md-input-container>
                                </div>
                                <div flex="15">
                                    <md-input-container class="md-block">
                                        <input type="text"
                                               id="dose"
                                               ng-model="dosage.dose"
                                               min="0" autocomplete="off"
                                               placeholder="Dose">
                                    </md-input-container>
                                </div>
                                <div flex="5"></div>
                                <div flex="20">
                                    <md-select id="frequency" ng-model="dosage.frequency" placeholder="Frequency" class="md-block">
                                        <md-option selected disabled >Frequency</md-option>
                                        <md-option value="24 hourly" >Once a Day</md-option>
                                        <md-option value="12 hourly" >Twice a Day</md-option>
                                        <md-option value="8 hourly" >Thrice a Day</md-option>
                                        <md-option value="6 hourly" >Four times a day</md-option>
                                        <md-option value="1 hourly" >Every Hour</md-option>
                                        <md-option value="2 hourly" >Every 2 Hours</md-option>
                                        <md-option value="3 hourly" >Every 3 Hours</md-option>
                                        <md-option value="4 hourly" >Every 4 Hours</md-option>
                                    </md-select>
                                </div>
                                <div flex="5"></div>
                                <div flex="20">
                                    <md-select id="duration" ng-model="dosage.duration" placeholder="Duration" class="md-block">
                                        <md-option  value="1 days" > One   Day</md-option >
                                        <md-option  value="2 days" > Two   Days</md-option >
                                        <md-option  value="3 days" > Three Days</md-option >
                                        <md-option  value="4 days" > Four  Days</md-option >
                                        <md-option  value="5 days" > Five  Days</md-option >
                                        <md-option  value="6 days" > Six   Days</md-option >
                                        <md-option  value="7 days" > Seven Days</md-option >
                                        <md-option  value="8 days" > Eight   Days</md-option >
                                        <md-option  value="9 days" > Nine   Days</md-option >
                                        <md-option  value="10 days" > Ten Days</md-option >
                                        <md-option  value="11 days" > Eleven  Days</md-option >
                                        <md-option  value="12 days" > Twelve  Days</md-option >
                                        <md-option  value="13 days" > Thirteen   Days</md-option >
                                        <md-option  value="14 days" > Fourteen Days</md-option >
                                        <md-option  value="15 days" > Fifteen Days</md-option >
                                        <md-option  value="16 days" > Sixteen  Day</md-option >
                                        <md-option  value="17 days" > Seventeen  Days</md-option >
                                        <md-option  value="18 days" > Eighteen Days</md-option >
                                        <md-option  value="19 days" > Nineteen  Days</md-option >
                                        <md-option  value="20 days" > Twenty Days</md-option >
                                        <md-option  value="21 days" > Twenty one   Days</md-option >
                                        <md-option  value="22 days" > Twenty two Days</md-option >
                                        <md-option  value="23 days" > Twenty three   Days</md-option >
                                        <md-option  value="24 days" > Twenty four   Days</md-option >
                                        <md-option  value="25 days" > Twenty five Days</md-option >
                                        <md-option  value="26 days" > Twenty six  Days</md-option >
                                        <md-option  value="27 days" > Twenty seven  Days</md-option >
                                        <md-option  value="28 days" > Twenty eight   Days</md-option >
                                        <md-option  value="29 days" > Twenty nine Days</md-option >
                                        <md-option  value="30 days" > Thirty Days</md-option >
                                    </md-select></div>
                            </div >
                            <div layout="row">
                                <div flex="40">
                                    <md-input-container class="md-block">
                                        <input type="text"
                                               id="instruction" autocomplete="off"
                                               ng-model="instructions"
                                               placeholder="Additional Instructions here">
                                    </md-input-container>
                                </div>
                                <div flex="10">
                                    <md-button class="md-raised md-primary"
                                               ng-click="addMedicine(dosage,selectedPatient,selectedItem,instructions)">Add To List</md-button>
                                </div>
                            </div>
                            <div layout="row">
                                <div flex="80" >
                                    <table class="mdl-data-table mdl-js-data-table mdl-data-table--selectable mdl-shadow--2dp" width="100%" ng-if="medicines.length >0">
                                        <tbody>
                                        <tr ng-repeat="med in medicines">
                                            <td class="mdl-data-table__cell--non-numeric">{{med.item_name}}
                                            </td>
                                            <td class="mdl-data-table__cell--non-numeric">{{med.dose}}</td>
                                            <td class="mdl-data-table__cell--non-numeric">{{med.frequency}}
                                            </td>
                                            <td class="mdl-data-table__cell--non-numeric">{{med.duration}}
                                            </td>
                                            <td class="mdl-data-table__cell--non-numeric">
                                                                                    <span
                                                                                            ng-click="removeFromSelection(med,medicines)"
                                                                                            style="cursor: pointer;">Remove</span>
                                            </td>
                                        </tr>
                                        </tbody>
                                    </table>
                                    <table class="mdl-data-table mdl-js-data-table mdl-data-table--selectable mdl-shadow--2dp" width="100%" ng-if="medicinesOs.length >0">
                                        <tbody>
                                        <tr ng-repeat="med in medicinesOs">
                                            <td class="mdl-data-table__cell--non-numeric">{{med.item_name}}</td>
                                            <td class="mdl-data-table__cell--non-numeric">{{med.dose}}</td>
                                            <td class="mdl-data-table__cell--non-numeric">{{med.frequency}}
                                            </td>
                                            <td class="mdl-data-table__cell--non-numeric">{{med.duration}}</td>
                                            <td class="mdl-data-table__cell--non-numeric">
                                                <span
                                                        ng-click="removeFromSelection(med,medicinesOs)"
                                                        style="cursor: pointer;">Remove</span>
                                            </td>
                                        </tr>
                                        </tbody>
                                    </table>
                                    <md-button class="md-raised md-primary pull-right" ng-click="saveMedicine(medicines)">Save</md-button>
                                </div>
                            </div>
                        </vertical-tab-pane>
                        <vertical-tab-pane title="Medical supplies">
                            <div layout="row">
                                <div flex="50">
                                    <md-input-container class="md-block">
                                        <input type="text" id="supplies" placeholder="Search medical supplies here"
                                               ng-model="selectedSupplies" autocomplete="off"
                                               typeahead-on-select=""
                                               uib-typeahead="item as item.item_name for item in searchMediSupplies($viewValue,selectedPatient) | filter:$viewValue ">
                                    </md-input-container>
                                </div>
                                <div flex="10">
                                    <md-input-container class="md-block">
                                        <input type="number" id="supply_qty" min="1" placeholder="Quantity" ng-model="supply_qty"
                                        >
                                    </md-input-container>
                                </div>
                                <div flex="10"> <md-button class="md-raised md-primary" ng-click="addSupplies(selectedPatient,supply_qty,selectedSupplies)">Add to list</md-button></div>
                            </div>
                            <div layout="row">
                                <div flex="50">
                                    <table class="full-width" ng-if="supplies.length>0">
                                        <thead>
                                        <tr>
                                            <th>Medical
                                                supplies</th>
                                            <th>Quantity</th>
                                            <th>Action</th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        <tr ng-repeat="item in supplies">
                                            <td>{{item.item_name}}</td>
                                            <td>{{item.quantity}}</td>
                                            <td><span ng-click="removeFromSelection(item,supplies)"
                                                      style="cursor: pointer;">Remove</span></td>
                                        </tr>
                                        <tr>
                                            <td colspan="2">
                                                <md-button  class="md-raised md-primary" ng-click="saveSupplies()">save</md-button>
                                            </td>
                                        </tr>
                                        </tbody>
                                    </table>
                                    <table class="full-width" ng-if="suppliesOS.length>0">
                                        <thead>
                                        <tr>
                                            <th>Medical
                                                supplies</th>
                                            <th>Action</th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        <tr ng-repeat="item in suppliesOS">
                                            <td>{{item.item_name}}</td>
                                            <td><span ng-click="removeFromSelection(item,suppliesOS)"
                                                      style="cursor: pointer;">Remove</span></td>
                                        </tr>
                                        <tr>
                                            <td colspan="2">
                                                <md-button
                                                        class="md-raised md-primary"
                                                        ng-click="saveSupplies()">save</md-button>
                                            </td>
                                        </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </vertical-tab-pane>
                        <vertical-tab-pane title="Procedures">
                            <div layout="row">
                                <div flex="30">
                                    <md-input-container class="md-block">
                                        <input type="text" placeholder="Search Procedure by Name"
                                               ng-model="selectedProcedures" autocomplete="off" id="procedures" typeahead-on-select="quantity = 1"
                                               uib-typeahead="item as item.item_name for item in searchProcedures($viewValue,selectedPatient) | filter:$viewValue ">
                                    </md-input-container>
                                </div>
                                <div flex="10"></div>
                                <md-input-container class="md-block" flex-gt-sm="10">
                                    <input type="number" id="qty" ng-model="quantity" placeholder="Quantity" min="0">
                                </md-input-container>
                                <div flex="10"></div>
                                <md-input-container class="md-block" flex-gt-sm="10">
                                    <button class="mdl-button mdl-js-button mdl-button--raised" ng-click="addProcedure(selectedPatient,selectedProcedures,quantity)">Add</button>
                                </md-input-container>
                            </div>
                            <div layout="row">
                                <div flex="50" ng-if="procedures.length>0">
                                    <table class="full-width" >
                                        <thead>
                                        <tr>
                                            <th>Procedure</th>
                                            <th>Quantity</th>
                                            <th>Action</th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        <tr ng-repeat="pro in procedures">
                                            <td>{{pro.item_name}}</td>
                                            <td>{{pro.quantity}}</td>
                                            <td>
                                                                                        <span
                                                                                                ng-click="removeFromSelection(pro,procedures)"
                                                                                                style="cursor: pointer;">Remove</span>
                                            </td>
                                        </tr>&nbsp;
                                        </tbody>
                                    </table>
                                    <md-button ng-click="saveProcedures(procedures)" class="md-raised md-primary pull-right">Save</md-button>
                                </div>
                            </div>
                        </vertical-tab-pane>
                        <vertical-tab-pane title="Conservative management">
                            <md-input-container class="md-block">
                                <label>Systemic examinations summary</label>
                                <textarea ng-model="conserv" id="conservation" md-maxlength="15000" rows="5" md-select-on-focus></textarea>
                            </md-input-container>
                            <md-button class="md-raised md-primary pull-right" ng-click="saveConservative(selectedPatient,conserv)">Save</md-button>
                        </vertical-tab-pane>
                        <vertical-tab-pane title="Prescribed medications">
                            <div layout="row">
                                <md-button class="md-raised md-primary" ng-click="prevMedics(selectedPatient)">Preview</md-button>
                                <table class="full-width"  ng-if="prevMedicines.length>0">
                                    <thead>
                                    <tr>
                                        <th>Medicine</th>
                                        <th>Dose</th>
                                        <th>Frequency</th>
                                        <th>Duration</th>
                                        <th>Qty</th>
                                        <th>Start
                                            Date</th>
                                        <th>Dosage
                                            Status</th>
                                        <th>Remark</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr ng-repeat="med in prevMedicines">
                                        <td>{{med.item_name}}</td>
                                        <td>{{med.dose}}</td>
                                        <td>{{med.frequency}}
                                        </td>
                                        <td>{{med.duration}}
                                        </td>
                                        <td>{{med.quantity}}</td>
                                        <td>{{med.start_date}}</td>
                                        <td>
                                            <span ng-if="med.duration>med.days && med.continuation_status==null" title="dosage in facility status {{med.out_of_stock}}">Ongoing dosage </span>
                                            <span ng-if="med.days>=med.duration && med.continuation_status==null" title="dosage in facility status {{med.out_of_stock}}">Dosage completed </span>
                                            <b  ng-if="med.continuation_status !=null" style="background-color: red">{{med.continuation_status}}-{{med.stoped_by}}</b>
                                        </td>

                                        <td ><button  ng-if="med.continuation_status==null"  ng-click="stopMedication(med)">Stop</button></td>

                                    </tr>
                                    </tbody>
                                </table>
                                <md-list ng-if="prevMedicines==0">
                                    <md-list-item >No medicine
                                        prescribed
                                        for this
                                        Patient</md-list-item>
                                </md-list>
                            </div>
                        </vertical-tab-pane>
                        <vertical-tab-pane title="Previous procedures">
                            <div layout="row">
                                <md-button class="md-raised md-primary pull-right" ng-click="prevProcedure(selectedPatient)">Preview</md-button>

                                <table class="full-width" ng-if="prevProcedures.length>0">
                                    <thead>
                                    <tr>
                                        <th>Procedure</th>
                                        <th>Procedure
                                            Type
                                        </th>
                                        <th>Date
                                            Ordered</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr ng-repeat="pro in prevProcedures">
                                        <td>{{pro.item_name}}</td>
                                        <td>{{pro.item_category}}</td>
                                        <td>{{pro.created_at}}</td>
                                    </tr>&nbsp;
                                    </tbody>
                                </table>
                            </div>
                        </vertical-tab-pane>
                        <vertical-tab-pane title="Rejected prescriptions">
                            <md-button class="md-raised md-primary" ng-click="getRejected(selectedPatient)">load prescriptions</md-button>

                            <table class="mdl-data-table mdl-js-data-table mdl-data-table--selectable mdl-shadow--2dp" width="100%">
                                <thead>
                                <th class="mdl-data-table__cell--non-numeric">Medicine</th>
                                <th class="mdl-data-table__cell--non-numeric">Dose</th>
                                <th class="mdl-data-table__cell--non-numeric">Frequency</th>
                                <th class="mdl-data-table__cell--non-numeric">Duration</th>
                                <th class="mdl-data-table__cell--non-numeric">Doctor's name</th>
                                <th class="mdl-data-table__cell--non-numeric">Reject reason</th>
                                <th class="mdl-data-table__cell--non-numeric">Action</th>
                                </thead>
                                <tr ng-repeat="rj in rejectedMedicines">
                                    <td class="mdl-data-table__cell--non-numeric">{{rj.item_name}}</td>
                                    <td class="mdl-data-table__cell--non-numeric" ng-if="!m">{{rj.dose}}</td>
                                    <td class="mdl-data-table__cell--non-numeric" ng-if="m">
                                        <md-input-container class="md-block">
                                            <input type="text"  placeholder="{{rj.dose}}" ng-model="rj.dose">
                                        </md-input-container>
                                    </td>
                                    <td class="mdl-data-table__cell--non-numeric" ng-if="!m">{{rj.frequency}}</td>
                                    <td class="mdl-data-table__cell--non-numeric" ng-if="m">
                                        <md-select id="frequency3" ng-model="rj.frequency" placeholder="Frequency" class="md-block">
                                            <md-option selected disabled >Frequency</md-option>
                                            <md-option value="24 hourly" >Once a Day</md-option>
                                            <md-option value="12 hourly" >Twice a Day</md-option>
                                            <md-option value="8 hourly" >Thrice a Day</md-option>
                                            <md-option value="6 hourly" >Four times a day</md-option>
                                            <md-option value="1 hourly" >Every Hour</md-option>
                                            <md-option value="2 hourly" >Every 2 Hours</md-option>
                                            <md-option value="3 hourly" >Every 3 Hours</md-option>
                                            <md-option value="4 hourly" >Every 4 Hours</md-option>
                                        </md-select>
                                    </td>
                                    <td class="mdl-data-table__cell--non-numeric" ng-if="!m">{{rj.duration}}</td>
                                    <td class="mdl-data-table__cell--non-numeric" ng-if="m">
                                        <md-select id="duration3" ng-model="rj.duration" placeholder="Duration" class="md-block">
                                            <md-option  value="1 days" > One   Day</md-option >
                                            <md-option  value="2 days" > Two   Days</md-option >
                                            <md-option  value="3 days" > Three Days</md-option >
                                            <md-option  value="4 days" > Four  Days</md-option >
                                            <md-option  value="5 days" > Five  Days</md-option >
                                            <md-option  value="6 days" > Six   Days</md-option >
                                            <md-option  value="7 days" > Seven Days</md-option >
                                            <md-option  value="8 days" > Eight   Days</md-option >
                                            <md-option  value="9 days" > Nine   Days</md-option >
                                            <md-option  value="10 days" > Ten Days</md-option >
                                            <md-option  value="11 days" > Eleven  Days</md-option >
                                            <md-option  value="12 days" > Twelve  Days</md-option >
                                            <md-option  value="13 days" > Thirteen   Days</md-option >
                                            <md-option  value="14 days" > Fourteen Days</md-option >
                                            <md-option  value="15 days" > Fifteen Days</md-option >
                                            <md-option  value="16 days" > Sixteen  Day</md-option >
                                            <md-option  value="17 days" > Seventeen  Days</md-option >
                                            <md-option  value="18 days" > Eighteen Days</md-option >
                                            <md-option  value="19 days" > Nineteen  Days</md-option >
                                            <md-option  value="20 days" > Twenty Days</md-option >
                                            <md-option  value="21 days" > Twenty one   Days</md-option >
                                            <md-option  value="22 days" > Twenty two Days</md-option >
                                            <md-option  value="23 days" > Twenty three   Days</md-option >
                                            <md-option  value="24 days" > Twenty four   Days</md-option >
                                            <md-option  value="25 days" > Twenty five Days</md-option >
                                            <md-option  value="26 days" > Twenty six  Days</md-option >
                                            <md-option  value="27 days" > Twenty seven  Days</md-option >
                                            <md-option  value="28 days" > Twenty eight   Days</md-option >
                                            <md-option  value="29 days" > Twenty nine Days</md-option >
                                            <md-option  value="30 days" > Thirty Days</md-option >
                                        </md-select>
                                        </md-input-container></td>
                                    <td class="mdl-data-table__cell--non-numeric" ng-if="!m">{{rj.name}}</td>
                                    <td class="mdl-data-table__cell--non-numeric" ng-if="m"><md-button class="md-raised md-primary" ng-click="updateMedicine(rj)">update</md-button></td>
                                    <td class="mdl-data-table__cell--non-numeric" ng-if="!m">{{rj.cancellation_reason}}</td>
                                    <td class="mdl-data-table__cell--non-numeric"><md-checkbox type="checkbox" class="" ng-model="m">Edit</md-checkbox></td>
                                </tr>
                            </table>
                        </vertical-tab-pane>
			<vertical-tab-pane title="Previous Investigations">
                                <md-button class="md-raised md-primary" ng-click="orderedInvestigations(selectedPatient)">load investigations</md-button>
                                <table class="mdl-data-table mdl-js-data-table mdl-data-table--selectable mdl-shadow--2dp" width="100%">
                                    <thead>
                                    <th class="mdl-data-table__cell--non-numeric">Date ordered</th>
                                    <th class="mdl-data-table__cell--non-numeric">Investigation name</th>
                                    <th class="mdl-data-table__cell--non-numeric">Results</th>
                                    <th class="mdl-data-table__cell--non-numeric">Doctor's name</th>
                                    <th class="mdl-data-table__cell--non-numeric">Doctor's contacts</th>
                                    </thead>
                                    <tr ng-repeat="item in doneInvestigations">
                                        <td class="mdl-data-table__cell--non-numeric">{{item.date_ordered}}</td>
                                        <td class="mdl-data-table__cell--non-numeric">{{item.item_name}}</td>
                                        <td class="mdl-data-table__cell--non-numeric">{{item.description}}</td>
                                        <td class="mdl-data-table__cell--non-numeric">{{item.name}}</td>
                                        <td class="mdl-data-table__cell--non-numeric">{{item.mobile_number}}</td>
                                    </tr>
                                </table>
                            </vertical-tab-pane>
                    </vertical-tabs>
                    <!--vertical tabs end-->
                </md-content>
            </md-tab>
            <md-tab label="blood request" ng-click="getVipimo(selectedPatient)">
                <md-content class="md-padding">
                    <div layout="row">
                        <div flex="30">
                            <table class="full-width">
                                <thead ng-if="latestLabResults.length>0">
                                <td class="mdl-data-table__cell--non-numeric">Investigation</td>
                                <td class="mdl-data-table__cell--non-numeric">Description</td>
                                <td class="mdl-data-table__cell--non-numeric">Attachment</td>
                                <td class="mdl-data-table__cell--non-numeric">Date</td>
                                </thead>
                                <tbody>
                                <tr ng-repeat="rs in latestLabResults">
                                    <td class="mdl-data-table__cell--non-numeric">{{rs.item_name}}</td>
                                    <td class="mdl-data-table__cell--non-numeric">{{rs.description}}</td>
                                    <td class="mdl-data-table__cell--non-numeric" ng-if="!rs.attached_image"> </td>
                                    <td class="mdl-data-table__cell--non-numeric" ng-if="rs.attached_image"><a href="/uploads/{{rs.attached_image}}" style="cursor: pointer">attachment</a></td>
                                    <td class="mdl-data-table__cell--non-numeric">{{rs.created_at}}</td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                        <div flex="5"></div>
                        <div flex="10">
                            <md-select ng-model="blood.blood_group" autocomplete="off" id="blood_group" placeholder="Blood group" class="md-no-underline">
                                <md-option value="A+">A+</md-option>
                                <md-option value="B+">B+</md-option>
                                <md-option value="O+">O+</md-option>
                                <md-option value="AB+">AB+</md-option>
                                <md-option value="A-">A-</md-option>
                                <md-option value="B-">B-</md-option>
                                <md-option value="O-">O-</md-option>
                                <md-option value="AB-">AB-</md-option>
                            </md-select>
                        </div>
                        <div flex="10">
                            <md-select ng-model="blood.unit_requested" id="unit_requested" autocomplete="off" placeholder="Unit requested" class="md-no-underline">
                                <md-option value="1">1</md-option>
                                <md-option value="2">2</md-option>
                                <md-option value="3">3</md-option>
                                <md-option value="4">4</md-option>
                                <md-option value="5">5</md-option>
                                <md-option value="6">6</md-option>
                                <md-option value="7">7</md-option>
                                <md-option value="8">8</md-option>
                                <md-option value="9">9</md-option>
                                <md-option value="10">10</md-option>
                                <md-option value="11">11</md-option>
                                <md-option value="12">12</md-option>
                            </md-select>
                        </div>
                        <div flex="15">
                            <md-select ng-model="blood.request_reason" id="" autocomplete="off" placeholder="Request reason" class="md-no-underline">
                                <md-option value="Severe malaria">Severe malaria</md-option>
                                <md-option value="Poor dietary intake">Poor dietary intake</md-option>
                                <md-option value="Acute haemorrhage">Acute haemorrhage</md-option>
                                <md-option value="Septic shock">Septic shock</md-option>
                                <md-option value="Anemia in failure">Anemia in failure</md-option>
                                <md-option value="Anemia in pregnancy">Anemia in pregnancy</md-option>
                                <md-option value="Anemia of prematurity">Anemia of prematurity</md-option>
                                <md-option value="Pre OP">Pre OP</md-option>
                                <md-option value="Post OP use">Post OP use</md-option>
                                <md-option value="PPH">PPH</md-option>
                                <md-option value="APH">APH</md-option>
                                <md-option value="DIC">DIC</md-option>
                            </md-select>
                        </div>
                        <div flex="10">
                            <md-select ng-model="blood.priority" id="prty" placeholder="Priority" class="md-no-underline">
                                <md-option value="Routine">Routine</md-option>
                                <md-option value="Urgent">Urgent</md-option>
                            </md-select>
                        </div>
                        <div flex="5">
                            <md-button class="md-raised md-primary" ng-click="requestBlood(blood)">save</md-button>
                        </div>
                    </div>
                    <div layout="row">

                    </div>
                </md-content>
            </md-tab>
            <md-tab label="Disposition">
                <md-content class="md-padding">
                    <div class="row">
                        <div class="col-xs-2">
                            <select class="form-control hidden-print" ng-model="template" ng-options="t.name for t in templates">

                            </select>
                        </div>
                        <br>
                    </div>

                    <div ng-include src="template.url" onload="myFunction()">

                    </div>
                    <div class="col-xs-12">
                        <!--discharge report starts -->
                        <script type="text/ng-template" id="discharge.html">
                            <div layout="row">
                                <div flex="5">
                                    <md-button class="md-raised md-primary" ng-click="generateDischargeForm(selectedPatient)">Generate report</md-button>
                                </div>
                                <div flex="10"></div>
                                <div flex="70" id="printDischarge">
                                    <table class="mdl-data-table mdl-js-data-table mdl-data-table--selectable mdl-shadow--2dp" width="100%">
                                        <thead>
                                        <th class="mdl-data-table__cell--non-numeric">Facility info</th>
                                        <th class="mdl-data-table__cell--non-numeric ">
                                            <img alt="image" src="/img/arm.png" width="50px" height="50px" />
                                            {{menu[0].facility_name}}&nbsp;&nbsp;{{menu[0].description}},
                                            {{menu[0].address}},
                                            {{menu[0].email}}
                                        </th>
                                        </thead>
                                        <tbody>
                                        <hr>
                                        <tr>
                                            <td class="mdl-data-table__cell--non-numeric " rowspan="6">Patient information</td>

                                        </tr>
                                        <tr>
                                            <td class="mdl-data-table__cell--non-numeric "><strong>{{selectedPatient.first_name}}
                                                {{selectedPatient.middle_name}} {{selectedPatient.last_name}}&nbsp;&nbsp;&nbsp;
                                                {{"MRN: "+selectedPatient.medical_record_number}}&nbsp;&nbsp;&nbsp;
                                                {{"DoB: "+selectedPatient.dob}}&nbsp;&nbsp;&nbsp;
                                                {{"Gender: "+selectedPatient.gender}}&nbsp;&nbsp;&nbsp;
                                                {{"Age: "+selectedPatient.age}}
                                            </strong></td>
                                        </tr>
                                        <tr>
                                            <td class="mdl-data-table__cell--non-numeric "> Admission date: &nbsp;&nbsp;&nbsp;{{patientAdmissionInfo[0][0].created_at }}&nbsp;&nbsp;&nbsp;
                                                |&nbsp;&nbsp;&nbsp; Ward name :&nbsp;&nbsp;&nbsp;
                                                {{patientAdmissionInfo[1][0].ward_name}} &nbsp;&nbsp;&nbsp;
                                                |&nbsp;&nbsp;&nbsp; Bed No: &nbsp;&nbsp;&nbsp;{{patientAdmissionInfo[0][0].bed_name }}&nbsp;&nbsp;&nbsp;

                                            </td>
                                        </tr>
                                        <tr>
                                            <td class="mdl-data-table__cell--non-numeric "> Patient's physical address: &nbsp;&nbsp;&nbsp;{{patientAdmissionInfo[2][0].residence_name }} </td>
                                        </tr>
                                        <tr ng-if="patientAdmissionInfo[3][0]">
                                            <td class="mdl-data-table__cell--non-numeric "> Next of kin names:&nbsp;&nbsp;&nbsp;
                                                {{patientAdmissionInfo[3][0].next_of_kin_name}}&nbsp;&nbsp;&nbsp; | &nbsp;&nbsp;&nbsp;Mobile phone:&nbsp;&nbsp;&nbsp;{{patientAdmissionInfo[3][0].mobile_number}} </td>
                                        </tr>
                                        <tr>
                                            <td class="mdl-data-table__cell--non-numeric ">Next of kin physical address :&nbsp;&nbsp;&nbsp; {{patientAdmissionInfo[4][0].residence_name}}</td>
                                        </tr>
                                        <tr ng-if="diagnosis.length>0">
                                            <td colspan="2" style="text-align: left;background-color: rgba(110, 104, 113, 0.41)"> <strong>Diagnosis OPD</strong></td>
                                        </tr>
                                        <tr ng-repeat=" diag in diagnosis" ng-if="diagnosis.length>0">
                                            <td class="mdl-data-table__cell--non-numeric"> {{diag.status}} </td>
                                            <td class="mdl-data-table__cell--non-numeric">
                                                {{diag.description}}
                                            </td>
                                        </tr>
                                        <tr ng-if="diagnosisIPD.length>0">
                                            <td colspan="2" style="text-align: left;background-color: rgba(110, 104, 113, 0.41)"> <strong>Diagnosis IPD</strong></td>
                                        </tr>
                                        <tr ng-repeat=" diag in diagnosisIPD" ng-if="diagnosisIPD.length>0">
                                            <td class="mdl-data-table__cell--non-numeric"> {{diag.status}} </td>
                                            <td class="mdl-data-table__cell--non-numeric">
                                                {{diag.description}}
                                            </td>
                                        </tr>
                                        <tr ng-if="medications.length>0">
                                            <td colspan="2" style="text-align: left;background-color: rgba(110, 104, 113, 0.41)"> <strong>Medications</strong></td>
                                        </tr>
                                        <tr ng-repeat="med in medications" ng-if="medications.length>0">
                                            <td class="mdl-data-table__cell--non-numeric">
                                                {{med.item_name}}</td>
                                            <td class="mdl-data-table__cell--non-numeric">{{med.dose}}, {{med.frequency}},{{'for '+ med.duration}}</td>

                                        </tr>
                                        <tr ng-if="procedures.length>0">
                                            <td colspan="2" style="text-align: left;background-color: rgba(110, 104, 113, 0.41)"> <strong>Procedures</strong></td>
                                        </tr>
                                        <tr ng-repeat="pro in procedures" ng-if="procedures.length>0">
                                            <td class="mdl-data-table__cell--non-numeric">
                                                {{pro.item_name}}</td>
                                            <td class="mdl-data-table__cell--non-numeric">{{pro.item_category}}</td>
                                        </tr>
                                        <tr>
                                            <td class="mdl-data-table__cell--non-numeric">Doctor's name</td>
                                            <td class="mdl-data-table__cell--non-numeric">{{doctor_details.name}} | {{'Tel: '+doctor_details.mobile_number}}</td>
                                        </tr>
                                        <tr>
                                            <td class="mdl-data-table__cell--non-numeric">{{summarized}}</td>
                                        </tr>
                                        <tr>
                                            <th colspan='2'>
                                                
                                                {{discharge_summary}}
                                                <p></p>
                                                 <textarea class="form-control" placeholder="Discharge Summary" ng-model="discharge_summary"></textarea>
                                            </th></tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            <div layout="row">
                                <div flex="70"> </div>
                                <div flex="10"><md-button class="md-raised md-primary" ng-click="dischargePatient(selectedPatient,discharge_summary)">Discharge this patient</md-button> </div>
                            </div>
                        </script>
                        <!--discharge report ends -->
                        <!--Internal referral starts -->
                        <script type="text/ng-template" id="internal.html">
                            <div class="col-xs-3" ng-repeat="clinic in clinics"><br>
                                <div class="list-group form-top" ng-click="internalTransfer(clinic,selectedPatient)"
                                     style="cursor: pointer;">
                                    {{clinic.department_name}}
                                </div>
                            </div>
                        </script>
                        <!--Internal referral ends -->
                        <!--referral starts -->
                        <script type="text/ng-template" id="referral.html">
                             <div class="row">
                                            <div class="col-xs-12" ng-if="selectedPatient.first_name.length>0"><br>
                                                <div class="col-xs-6">
                                                    <div class="panel panel-default">
                                                        <div class="panel-heading">
                                                            <p>Hospital
                                                                To
                                                                Refer
                                                                Patient</p>
                                                        </div>
                                                        <div class="panel-body">
                                                            <div class="row">
                                                                <input type="text" class="form-control" placeholder="Search hospital to refer patient"
                                                                       ng-model="selectedFacility"
                                                                       uib-typeahead="facility as facility.facility_name for facility in showFacility($viewValue) |filter:$viewValue  ">
                                                            </div>
                                                          <!--   <br> {{selectedFacility.facility_name}} -->
                                                            <br>
                                                            <div 
                                                            <label>Choose Date</label>                                                                <input class="form-control" placeholder="Enter Date"  type="text" ng-model="ref.referral_date"  >
                                                            <label>Choose Time</label>                                                                <input class="form-control" placeholder="Enter Time"   ng-model="ref.referral_time" type="text" >
                                                            </div>
                                                             <p></p>
                                                            
 
                              
                                    <div>
                                        <label>Temperature</label>
                                        <input ng-model="ref.temperature" class="form-control"  />
                                    </div>
                                    <div>
                                        <label>Heart Rate</label>
                                        <input ng-model="ref.heart_rate" class="form-control"  />
                                    </div>
                                    <div>
                                        <label>Respiratory Rate</label>
                                        <input ng-model="ref.respiratory_rate"  class="form-control"  />
                                    </div>

                                   <div>
                                        <label>Blood Pressure</label>
                                        <input ng-model="ref.bp"  class="form-control"  />
                                    </div>
                                    
                               
                                                           <p></p>
                                                           
                                                            <div >
                                                              <label>Diagnosis</label>
                                                                <textarea class="form-control" placeholder="Write Diagnosis" ng-model="ref.diagnosis"></textarea>
                                                            </div>
                                                           <p></p> <p></p>
                                                            <div >
                                                               <label>Mental Status</label>
                                                                <textarea class="form-control" placeholder="Write Mental Status" ng-model="ref.mental_status"></textarea>
                                                            </div>
                                                           <p></p> <p></p>
                                                            <div >
                                                               <label>Alert</label>
                                                                <textarea class="form-control" placeholder="Alert" ng-model="ref.alert"></textarea>
                                                            </div>
                                                           <p></p> <p></p>
                                                            <div >
                                                              <label>Pertinent</label>
                                                                <textarea class="form-control" placeholder="Pertinent" ng-model="ref.pertinent"></textarea>
                                                            </div>
                                                           <p></p> <p></p>
                                                            <div >
                                                               <label>History</label>
                                                                <textarea class="form-control" placeholder="Write History" ng-model="ref.history"></textarea>
                                                            </div>
                                                           <p></p> <p></p>
                                                            <div >
                                                                <textarea class="form-control" placeholder="Chronic ediction" ng-model="ref.chronic_ediction"></textarea>
                                                            </div>
                                                           <p></p> <p></p>
                                                            <div >
                                                              <label>Medication Allergies</label>
                                                                <textarea class="form-control" placeholder="Medication Allergies" ng-model="ref.allergy"></textarea>
                                                            </div>
                                                           <p></p> 
                                                            <div >
                                                                <label>Lab Results</label>
                                                                <textarea class="form-control" placeholder="Lab Results" ng-model="ref.lab_result"></textarea>
                                                            </div>
                                                           <p></p> <p></p>
                                                            <div >
                                                              <label>Radiology Results</label>
                                                                <textarea class="form-control" placeholder="Radiology Results" ng-model="ref.radiology_result"></textarea>
                                                            </div>
                                                            <p></p> <p></p>
                                                            <div >
                                                               <label>Treatment rendered prior to transfer</label>
                                                                <textarea class="form-control" placeholder="Treatment rendered prior to transfer (for medications, please include name,dose,route and time of administration)" ng-model="ref.treatment"></textarea>
                                                            </div>
                                                           <p></p> <p></p>
                                                            <div >
                                                               <label>Reason for Transfer</label>
                                                                <textarea class="form-control" placeholder="Medical Reason for Transfer" ng-model="ref.summary"></textarea>
                                                            </div>
                                                           
                                                           <p></p>
                                                            <div >
                                                              <label>To facilitate transfer of care, Contact</label>
                                                                <textarea class="form-control" placeholder="Name and Phone Number" ng-model="ref.contact_person"></textarea>
                                                            </div>

                                                            <br>
                                                            <md-button
                                                                    class="md-raised md-primary pull-right"
                                                                    ng-click="exReferral(selectedPatient,selectedFacility,ref)">Save</md-button>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-xs-6" ng-if="status==200">
                                                    <!--reserved for printings-->
   <a ng-click="PrintContent1();" title="Print"   class="no-print pull-right "><b class="glyphicon glyphicon-print "></b>  </a>
   

<div id="refId">
  
   <table border="1">

<tr style="text-allign:center">
  <th colspan="4">MINISTRY OF HEALTH COMMUNITY DEVELOPMENT,GENDER,ELDERLY AND CHILDREN</th>
</tr>

<tr style="text-allign:center">
  <th colspan="4">{{cardTitle.facility_name}} {{cardTitle.description}} &nbsp;  <P></P>
    REFERRAL FORM To {{refdata.facility_name}} {{refdata.facility_type}}
    <p></p>
 HospitalNo: &nbsp;&nbsp;&nbsp;{{loginUserFacilityDetails[0].facility_code}}<p></p>
       Address:&nbsp;&nbsp;&nbsp;{{loginUserFacilityDetails[0].facility_address}} <p></p>
        City:&nbsp;&nbsp;&nbsp;{{loginUserFacilityDetails[0].council_name}} <p></p>
        Phone#:&nbsp;&nbsp;&nbsp;{{loginUserFacilityDetails[0].mobile_number}} <p></p>
        Email#:&nbsp;&nbsp;&nbsp;{{loginUserFacilityDetails[0].facility_email}} <p></p>
  </th>
   
</tr>
<tr>
  <th >
    Name: &nbsp;{{refdata.name}} <p>  </p>
    Age: &nbsp; {{refdata.age}}<p>  </p>
    Date: &nbsp; {{refdata.referral_date}}<p>  </p>
    Time: &nbsp; {{refdata.referral_time}}<p>  </p>
  </th>
   <th >
    Reg: &nbsp;{{refdata.reg}} <p>  </p>
    
   <p>  </p>
  </th>
   <th colspan="2">
    Gender: &nbsp;{{refdata.gender}} <p>  </p>
    District: &nbsp;{{loginUserFacilityDetails[0].council_name}} <p>  </p>
   <p>  </p>
  </th>
</tr>
<tr>
  <th>Diagnosis</th>
  <th colspan="3">{{refdata.diagnosis}}</th>
</tr>

<tr>
  <th>Temperature: &nbsp;{{refdata.temperature}}</th>
  <th>Heart Rate: &nbsp;{{refdata.heart_rate}}</th>
  <th>Respiratory Rate: &nbsp;{{refdata.respiratory_rate}}</th>
  <th>Blood Pressure: &nbsp;{{refdata.bp}}</th>
   
</tr>

<tr>
  <th>Mental Status(Circle): &nbsp;{{refdata.mental_status}}</th>
  <th colspan="3">Alert: &nbsp;{{refdata.alert}}</th>
  
</tr>

<tr>
  <th colspan="4">Patient History: &nbsp;{{refdata.history}}</th>
</tr>
<tr>
  <th colspan="4">Chronic Education: &nbsp;{{refdata.chronic_ediction}}</th>
</tr>

<tr>
  <th colspan="4">Pertinent Examination Findings: &nbsp;{{refdata.pertinent}}</th>
</tr>

<tr>
  <th colspan="2">Lab Results: &nbsp;{{refdata.lab_result}}</th>
  <th colspan="2">Radiology Results: &nbsp;{{refdata.radiology_result}}</th>
</tr>
<tr>
  <th colspan="4">Treatment rendered prior to trnasfer :&nbsp;{{refdata.treatment}}</th>
</tr>
<tr>
  <th colspan="4">Medical Reason for trnasfer :&nbsp;{{refdata.summary}}</th>
</tr>
<tr>
  <th colspan="2">Doctor Name: &nbsp;{{loginUserFacilityDetails[0].name}}</th>
  <th colspan="2">Phone Number: &nbsp;{{loginUserFacilityDetails[0].mobile_number}}</th>
</tr>
<tr>
  <th colspan="4">To facilitate transfer of care, call: &nbsp;{{refdata.contact_person}}</th>
</tr>
 </table>
</div>
</div>
                                                   




                                                </div>
                                            </div>
                                        </div>
                        </script>
                        <!--referral ends -->
                        <script type="text/ng-template" id="deceased.html">
                            <div class="row"><br>
                                <div class="col-xs-4">
                                    <md-input-container class="md-block">
                                                                <textarea ng-model="corpse.immediate_cause" id="immediate_cause" placeholder="Immediate Cause of Death"

                                                                          required="Required"></textarea>
                                    </md-input-container>
                                </div>
                                <div class="col-xs-4">
                                    <md-input-container class="md-block">
                                                                <textarea ng-model="corpse.underlying_cause" id="underlying_cause" placeholder="Other underlying conditions"

                                                                          required="Required"></textarea>
                                    </md-input-container>
                                </div>
                                <div class="col-xs-2">
                                    <md-input-container class="md-block">
                                        <input type="text" ng-model="selectedDiagnosis" typeahead-on-select=" "
                                               placeholder="Diagnosis"
                                               uib-typeahead="prov as prov.description+' '+prov.code for prov in showDiagnosis($viewValue) | filter:$viewValue " autocomplete="off">
                                    </md-input-container>
                                </div>
                                <div class="col-xs-2"><md-button class="md-raised md-primary pull-right"
                                                                 ng-click="deceased(selectedPatient,corpse,selectedDiagnosis)">Send to Last office</md-button></div>
                            </div>
                        </script>
                    </div>
                </md-content>
            </md-tab>
        </md-tabs>
    </md-dialog-content>
    <md-dialog-actions layout="row">

    </md-dialog-actions>
</md-dialog>